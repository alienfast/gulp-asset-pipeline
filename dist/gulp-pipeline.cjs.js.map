{"version":3,"file":"gulp-pipeline.cjs.js","sources":["../src/ruby/ruby.js","../src/ruby/rails.js","../src/preset.js","../src/base.js","../src/baseGulp.js","../src/baseRecipe.js","../src/eslint.js","../src/uglify.js","../src/autoprefixer.js","../src/images.js","../src/util/file.js","../src/sass.js","../src/scssLint.js","../src/aggregate.js","../src/rollupEs.js","../src/rollupCjs.js","../src/rollupCjsBundled.js","../src/rollupIife.js","../src/rollupAmd.js","../src/rollupUmd.js","../src/copy.js","../src/baseClean.js","../src/cleanImages.js","../src/cleanStylesheets.js","../src/cleanJavascripts.js","../src/cleanDigest.js","../src/util/recipes.js","../src/util/parallel.js","../src/clean.js","../src/util/clean.js","../src/rev.js","../src/revReplace.js","../src/cssNano.js","../src/baseMocha.js","../src/mocha.js","../src/mochaPhantomJs.js","../src/basePublish.js","../src/prepublish.js","../src/publishBuild.js","../src/publishNpm.js","../src/publishGhPages.js","../src/jekyll.js","../src/util/series.js","../src/util/tmpDir.js","../src/util/tmpDirName.js","../src/sleep.js","../src/util/sleep.js","../src/registry/baseRegistry.js","../src/registry/railsRegistry.js","../src/registry/railsEngineDummyRegistry.js"],"sourcesContent":["import path from 'path'\nimport fs from 'fs'\n\nconst Ruby = class {\n  static localPath(name) {\n    let filename = `${name}`\n\n    // if using source dir\n    let filepath = path.join(__dirname, filename) // eslint-disable-line no-undef\n    try {\n      fs.statSync(filepath)\n    }\n    catch (error) {\n      // if using dist dir, use the relative src/ruby path\n      filepath = path.join(__dirname, '../src/ruby', filename) // eslint-disable-line no-undef\n      fs.statSync(filepath)\n    }\n\n    return filepath\n  }\n}\n\nexport default Ruby\n","import Ruby from './ruby'\nimport path from 'path'\nimport glob from 'glob'\nimport spawn from 'cross-spawn'\nimport fs from 'fs'\nimport jsonfile from 'jsonfile'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\nimport console from 'console'\n\nconst BaseDirectoriesCache = `.gulp-pipeline-rails.json`\nconst GemfileLock = `Gemfile.lock`\n\nconst Rails = class {\n  static enumerateEngines() {\n\n    let results = spawn.sync(Ruby.localPath('railsRunner.sh'), [Ruby.localPath('enumerateEngines.rb')], {\n      sdtio: 'inherit',\n      cwd: this.railsAppCwd()\n    })\n\n\n    // run via spring with zero results:\n    //    status: 0,\n    //    stdout: '{}\\n',\n    //    stderr: 'Running via Spring preloader in process 95498\\n',\n\n    if(results.status !== 0) {\n\n\n      Util.log(stringify(results))\n\n\n      if (results.stderr != '' || results.error != null) {\n        Util.log(stringify(results))\n\n        let msg = ''\n        if (results.stderr) {\n          msg += results.stderr\n        }\n        if (results.error) {\n          msg += results.error\n        }\n        // message will be either error or stderr, so just grap both of them\n        throw new Error(`Ruby script error: \\n${results.stderr}${results.error}`)\n      }\n    }\n    return JSON.parse(results.stdout)\n  }\n\n  /**\n   * We need a rails app to run our rails script runner.  Since this project could be a rails engine, find a rails app somewhere in or under the cwd.\n   */\n  static railsAppCwd() {\n    let entries = glob.sync('**/bin/rails', {realpath: true})\n    if (!entries || entries.length <= 0) {\n      throw new Error(`Unable to find Rails application directory based on existence of 'bin/rails'`)\n    }\n\n    if (entries.length > 1) {\n      throw new Error(`railsAppCwd() should only find one rails application but found ${entries}`)\n    }\n    return path.join(entries[0], '../..')\n  }\n\n  /**\n   * Return the baseDirectories to search for assets such as images.  In rails, this means\n   *  enumerating rails engines and collecting their root paths.  This is a lengthy process\n   *  because you have to startup a rails environment to enumerate the engines, so we cache\n   *  the baseDirectories in a file and compare it to the Gemfile.lock's modified time.  If\n   *  the Gemfile.lock changes, we throw out the cache, enumerate the engines again and write\n   *  a new cache file.\n   *\n   * @returns {{baseDirectories: string[]}}\n   */\n  static baseDirectories() {\n    if (!this.changed(GemfileLock, BaseDirectoriesCache)) {\n      Util.log(`Gemfile.lock is unchanged, using baseDirectories cache.`)\n      return jsonfile.readFileSync(BaseDirectoriesCache)\n    }\n    else {\n      Util.log(`Generating baseDirectories and rails engines cache...`)\n      try {\n        fs.unlinkSync(BaseDirectoriesCache)\n      } catch (error) {\n        //ignore\n      }\n\n      let engines = Rails.enumerateEngines()\n      console.log(stringify(engines)) // eslint-disable-line no-console\n\n      let baseDirectories = ['./']\n      for (let key of Object.keys(engines)) {\n        baseDirectories.push(engines[key])\n      }\n\n      Util.log(`Writing baseDirectories cache...`)\n      let result = {baseDirectories: baseDirectories}\n      jsonfile.writeFileSync(BaseDirectoriesCache, result, {spaces: 2})\n      return result\n    }\n  }\n\n  static changed(sourceFileName, targetFileName) {\n    let sourceStat = null\n    let targetStat = null\n    try {\n      sourceStat = fs.statSync(sourceFileName)\n      targetStat = fs.statSync(targetFileName)\n    }\n    catch (error) {\n      return true\n    }\n\n    if (sourceStat.mtime > targetStat.mtime) {\n      return true\n    }\n    else {\n      return false\n    }\n  }\n}\n\nexport default Rails\n","import extend from 'extend'\nimport Rails from './ruby/rails'\nimport stringify from 'stringify-object'\n\n//import Util from 'gulp-util'\n\n// NOTE: `source` and `watch` are node-glob options hashes. e.g. gulp.src(source.glob, source.options)\n\n// Baseline is the simplest possible.  Take caution in modifying this one or make sure your platform preset overrides everything necessary.\nconst Baseline = {\n  javascripts: {\n    source: {\n      glob: 'index.js',\n      options: {cwd: 'js'},\n      all: '**/*' // include all files, may have yml, sh, json, in addition to js\n    },\n    test: {\n      glob: '**/*.js',\n      options: {cwd: 'test'}\n    },\n    watch: {\n      glob: '**/*.js',\n      options: {cwd: 'js'}\n    },\n    dest: 'dist'\n  },\n  stylesheets: {\n    source: {\n      glob: ['*.scss', '!_*.scss'],  // do not compile all files, only non-underscored files\n      options: {cwd: 'scss'},\n      all: '**/*.scss'\n    },\n    watch: {\n      glob: '**/*.scss',\n      options: {cwd: 'scss'}\n    },\n    dest: 'dist'\n  },\n  images: {\n    source: {options: {cwd: 'images'}},\n    watch: {options: {cwd: 'images'}},\n    dest: 'dist'\n  },\n  postProcessor: {\n    source: {options: {cwd: 'dist'}},\n    watch: {options: {cwd: 'dist'}},\n    dest: 'dist'\n  }\n}\n\nconst PresetNodeSrc = {\n  javascripts: {\n    source: { options: {cwd: 'src'}},\n    watch: {options: {cwd: 'src'}}\n  }\n}\n\nconst PresetNodeLib = {\n  javascripts: {\n    source: { options: {cwd: 'lib'}},\n    watch: {options: {cwd: 'lib'}}\n  }\n}\n\n// Rails, the oddball from a structure consideration\nconst railsJs = 'app/assets/javascripts'\nconst railsSs = 'app/assets/stylesheets'\nconst railsImages = 'app/assets/images'\nconst railsDest = 'public/assets/debug'\nconst PresetRails = {\n  javascripts: {\n    source: {\n      glob: 'application.js',\n      options: {cwd: railsJs}\n    },\n    watch: {options: {cwd: railsJs}},\n    dest: railsDest\n  },\n  stylesheets: {\n    source: {options: {cwd: railsSs}},\n    watch: {options: {cwd: railsSs}},\n    dest: railsDest\n  },\n  images: {\n    source: {options: {cwd: railsImages}},\n    watch: {options: {cwd: railsImages}},\n    dest: railsDest\n  },\n  postProcessor: {\n    source: {options: {cwd: railsDest}},\n    watch: {options: {cwd: railsDest}},\n    dest: 'public/assets/digest'\n  }\n}\n\n\nconst Preset = class {\n  static baseline(overrides = {}) {\n    return extend(true, {}, Baseline, overrides)\n  }\n\n  static nodeLib(overrides = {}) {\n    return extend(true, {}, Baseline, PresetNodeLib, overrides)\n  }\n\n  static nodeSrc(overrides = {}) {\n    return extend(true, {}, Baseline, PresetNodeSrc, overrides)\n  }\n\n  static rails(overrides = {}) {\n\n    return extend(true, {}, Baseline, PresetRails, Rails.baseDirectories(), overrides)\n  }\n\n  /**\n   * Helper to quickly resolve the config from preset based on the presetType\n   *\n   * @param preset\n   * @param configs - ordered set of overrides\n   * @returns {source, watch, dest}\n   */\n  static resolveConfig(preset, ...configs) {\n    if (!preset) {\n      throw new Error(`Preset must be specified.  Please use one from the preset.js or specify a custom preset configuration.`)\n    }\n\n    let configOverrides = extend(true, {}, ...configs)\n    //Util.log(`config before typeConfig: \\n${stringify(configOverrides)}`)\n\n    if (!configOverrides || !configOverrides.presetType) {\n      throw new Error(`presetType must be specified in the config (usually the Default config).  See preset.js for a list of types such as javascripts, stylesheets, etc.`)\n    }\n\n    let typeConfig = null\n    if (configOverrides.presetType !== 'macro') {\n      typeConfig = preset[configOverrides.presetType]\n      if (!typeConfig) {\n        throw new Error(`Unable to resolve configuration for presetType: ${configOverrides.presetType} from preset: ${stringify(preset)}`)\n      }\n    }\n    else {\n      typeConfig = {}\n    }\n\n    // now that we've determined the typeConfig, overlay the overrides\n    let resolved = extend(true, {}, typeConfig, configOverrides)\n\n    //Util.log(`resolved config with preset: \\n${stringify(resolved)}`)\n    return resolved\n  }\n}\nexport default Preset\n","import extend from 'extend'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\n\nexport const Default = {\n  watch: true,\n  debug: false\n}\n\nconst Base = class {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(...configs) {\n    this.config = extend(true, {}, Default, ...configs)\n    //this.debugDump(`[${this.constructor.name}] using resolved config`, this.config)\n  }\n\n  // ----------------------------------------------\n  // protected\n  requireValue(value, name) {\n    if (value === undefined || value == null) {\n      this.notifyError(`${name} must be defined, found: ${value}`)\n    }\n  }\n\n  log(msg) {\n    Util.log(msg)\n  }\n\n  debug(msg) {\n    if (this.config.debug) {\n      this.log(`[${Util.colors.cyan('debug')}][${Util.colors.cyan(this.constructor.name)}] ${msg}`)\n    }\n  }\n\n  debugDump(msg, obj) {\n    if (this.config.debug) {\n      this.debug(`${msg}:\\n${this.dump(obj)}`)\n    }\n  }\n\n  dump(obj) {\n    return stringify(obj)\n  }\n\n  notifyError(error, e) {\n    this.log(error)\n    throw e\n  }\n}\n\nexport default Base\n","import Base from './base'\nimport notify from 'gulp-notify'\nimport Util from 'gulp-util'\nimport shelljs from 'shelljs'\n\nexport const Default = {\n  debug: false,\n  watch: true,\n  task: {\n    name: undefined,\n    description: '',\n    prefix: '', // task name prefix\n    suffix: ''  // task name suffix\n  }\n}\n\nconst BaseGulp = class extends Base {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, ...configs) {\n    super(Default, ...configs)\n    this.requireValue(gulp, 'gulp')\n    this.gulp = gulp\n  }\n\n  taskName() {\n    if (!this.config.task || !this.config.task.name) {\n      return ''\n    }\n\n    //if (!this.config.task.name) {\n    //  this.notifyError(`Expected ${this.constructor.name} to have a task name in the configuration.`)\n    //}\n    return `${this.config.task.prefix}${this.config.task.name}${this.config.task.suffix}`\n  }\n\n  watchTaskName() {\n    if (this.config.watch && this.config.watch.name) {\n      return this.config.watch.name\n    }\n    else {\n      return `${this.taskName()}:watch`\n    }\n  }\n\n  notifyError(error, done, watching = false) {\n    let isWatching = (this.gulp ? this.gulp.watching : undefined) || watching\n    this.debug(`isWatching: ${isWatching}`)\n    //this.debugDump('notifyError', error)\n\n    let lineNumber = (error.lineNumber) ? `Line ${error.lineNumber} -- ` : ''\n    let taskName = error.task || ((this.config.task && this.config.task.name) ? this.taskName() : this.constructor.name)\n\n    let title = `Task [${taskName}] failed`\n    if (error.plugin) {\n      title += ` in [${error.plugin}]`\n    }\n\n    notify({\n      title: title,\n      message: `${lineNumber}See console.`,\n      sound: 'Sosumi' // See: https://github.com/mikaelbr/node-notifier#all-notification-options-with-their-defaults\n    }).write(error)\n\n    let tag = Util.colors.black.bgRed\n    let report = `\\n${tag('    Task:')} [${Util.colors.cyan(taskName)}]\\n`\n\n    if (error.plugin) {\n      report += `${tag('  Plugin:')} [${error.plugin}]\\n`\n    }\n\n    report += `${tag('   Error:')} `\n\n    if (error.message) {\n      report += `${error.message}\\n`\n    }\n    else {\n      report += `${error}\\n`\n    }\n\n    if (error.lineNumber) {\n      report += `${tag('    Line:')} ${error.lineNumber}\\n`\n    }\n\n    if (error.fileName) {\n      report += `${tag('    File:')} ${error.fileName}\\n`\n    }\n    this.log(report)\n\n    // Prevent the 'watch' task from stopping\n    if (isWatching) {\n        // do nothing\n      this.debug(`notifyError: watching, so not doing anything`)\n    }\n    else if (this.gulp) {\n      // if this is not used, we see \"Did you forget to signal async completion?\", it also unfortunately logs more distracting information below.  But we need to exec the callback with an error to halt execution.\n      this.donezo(done, error)\n    }\n    else {\n      this.debug(`notifyError: throwing error`)\n      throw error\n    }\n  }\n\n  /**\n   * if done is provided, run it\n   *\n   * @param done\n   */\n  donezo(done, error = null) {\n    if (done) {\n      if (error) {\n        this.debug('executing callback with error')\n        done(error)\n      }\n      else {\n        this.debug('executing callback without error')\n        done()\n      }\n    }\n    else {\n      this.debug(`done callback was not provided`)\n    }\n  }\n\n  /**\n   * Wraps shellJs calls that act on the file structure to give better output and error handling\n   * @param command\n   * @param logResult - return output from the execution, defaults to true. If false, will return code instead\n   * @param returnCode - defaults to false which will throw Error on error, true will return result code\n   */\n  exec(command, logResult = true, returnCode = false) {\n    let options = {silent: true}\n    if (this.config.cwd) {\n      options['cwd'] = this.config.cwd\n    }\n    else {\n      this.notifyError('cwd is required')\n    }\n\n    if (command.includes(`undefined`)) {\n      this.notifyError(`Invalid command: ${command}`)\n    }\n\n    this.debug(`Executing \\`${command}\\` with cwd: ${options['cwd']}`)\n    let shellResult = shelljs.exec(command, options)\n    let output = this.logShellOutput(shellResult, logResult);\n\n    if (shellResult.code === 0 || shellResult.code === 1) {\n\n      // ---\n      // determine the return value\n      if (returnCode) {\n        return shellResult.code\n      }\n      else {\n        return output\n      }\n    }\n    else {\n      if (returnCode) {\n        return shellResult.code\n      }\n      else {\n        this.notifyError(`Command failed \\`${command}\\`, cwd: ${options.cwd}: ${shellResult.stderr}.`)\n      }\n    }\n  }\n\n  logShellOutput(shellResult, logResult) {\n    //this.debug(`[exit code] ${shellResult.code}`)\n\n    // ---\n    // Log the result\n    // strangely enough, sometimes useful messages from git are an stderr even when it is a successful command with a 0 result code\n    let output = shellResult.stdout\n    if (output == '') {\n      output = shellResult.stderr\n    }\n\n    //this.log(stringify(shellResult))\n    if (output != '') {\n      if (logResult) {\n        this.log(output)\n      }\n      else {\n        this.debug(`[output] \\n${output}`)\n      }\n    }\n    return output;\n  }\n}\n\nexport default BaseGulp\n","import BaseGulp from './baseGulp'\nimport Preset from './preset'\nimport extend from 'extend'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\n\nexport const Default = {\n  watch: true,\n  debug: false\n}\n\nconst BaseRecipe = class extends BaseGulp {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n\n    super(gulp,\n      extend(true, {},  // extend presets here since BaseGulp doesn't use preset.\n        Default,\n        {baseDirectories: preset.baseDirectories},\n        Preset.resolveConfig(preset, ...configs)\n      )\n    )\n\n    // in case someone needs to inspect it later i.e. buildControl\n    this.preset = preset\n    this.registerTask()\n    this.registerWatchTask()\n  }\n\n  registerWatchTask() {\n    if (this.config.watch) {\n      // generate watch task e.g. sass:watch\n      let name = this.watchTaskName()\n      this.debug(`Registering task: ${Util.colors.green(name)}`)\n      this.watchFn = (done) => {\n        this.log(`[${Util.colors.green(name)}] watching ${this.config.watch.glob} ${stringify(this.config.watch.options)}...`)\n\n        return this.gulp.watch(this.config.watch.glob, this.config.watch.options, () => {\n          this.log(`Watched file changed, running ${this.taskName()}...`);\n          return Promise\n            .resolve(this.run(done, true))\n            .then(() => this.logFinish())\n        })\n      }\n      this.watchFn.description = this.createWatchDescription()\n      this.gulp.task(name, this.watchFn)\n    }\n  }\n\n  createWatchDescription() {\n    return Util.colors.grey(`|___ watches ${this.config.watch.options.cwd}/${this.config.watch.glob}`)\n  }\n\n  registerTask() {\n    // generate primary task e.g. sass\n\n    // set a fn for use by the task, also used by aggregate/series/parallel\n    let taskFn = (done) => {\n      //this.log(`Running task: ${Util.colors.green(name)}`)\n\n      if (this.config.debug) {\n        this.debugDump(`Executing ${Util.colors.green(this.displayName())} with config`, this.config)\n      }\n      return this.run(done)\n    }\n\n    // metadata for convenience so that gulp tasks show up with this instead of 'anonymous'\n    taskFn.displayName = this.displayName()\n\n    // assign it last so that displayName() can resolve this first as others may set it externally like <clean>\n    this.taskFn = taskFn\n\n    if (this.shouldRegisterTask()) {\n\n      // set the description\n      if (this.createDescription !== undefined) {\n        this.config.task.description = this.createDescription()\n      }\n\n      // set metadata on fn for discovery by gulp\n      this.taskFn.description = this.config.task.description\n\n\n      // register\n      let name = this.taskName()\n      this.debug(`Registering task: ${Util.colors.green(name)}`)\n      this.gulp.task(name, this.taskFn)\n    }\n  }\n\n  shouldRegisterTask() {\n    return (this.config.task && this.config.task.name)\n  }\n\n  displayName() {\n    if (this.taskFn !== undefined && this.taskFn.displayName) {\n      return this.taskFn.displayName\n    }\n    else if (this.shouldRegisterTask()) {\n      return this.taskName()\n    }\n    else {\n      // metadata for convenience so that gulp tasks show up with this instead of 'anonymous'\n      return `<${this.constructor.name}>`\n    }\n  }\n\n  logFinish(message = 'finished.') {\n    this.log(`[${Util.colors.green(this.taskName())}] ${message}`)\n  }\n\n  debugOptions() { // this controls the gulp-debug log statement, created to mirror our #debug's log format\n    return {title: `[${Util.colors.cyan('debug')}][${Util.colors.cyan(this.constructor.name)}]`}\n  }\n}\n\nexport default BaseRecipe\n","import BaseRecipe from './baseRecipe'\nimport eslint from 'gulp-eslint'\nimport extend from 'extend'\n//import jscs from 'gulp-jscs'\n//import stylish from 'gulp-jscs-stylish'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\nimport {PluginError} from 'gulp-util'\n\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts',\n  task: {\n    name: 'eslint'\n  },\n  source: {\n    glob: '**/*.js'\n  },\n  options: {\n    // Files were being ignored\n    // ---------------------------\n    //  With gulp-pipeline setup, we are specific enough with cwd that we don't need to use a blanket\n    //  (default) .eslintignore file.  Turn off this behavior and lint anything we point at.\n    //  @see http://eslint.org/docs/developer-guide/nodejs-api#cliengine\n    warnFileIgnored: true,\n    ignore: false\n  }\n}\n\nconst EsLint = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n  }\n\n  createDescription() {\n    return `Lints ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n    // eslint() attaches the lint output to the \"eslint\" property of the file object so it can be used by other modules.\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(eslint(this.config.options))\n      .pipe(eslint.format()) // outputs the lint results to the console. Alternatively use eslint.formatEach() (see Docs).\n      // primarily eslint.failAfterError() but we use notifyError to process the difference between watching and not so we don't end process.\n      .pipe(eslint.results((results) => {\n        let count = results.errorCount;\n        if (count > 0) {\n          let error =  new PluginError(\n            'gulp-eslint',\n            {\n              name: 'ESLintError',\n              message: 'Failed with ' + count + (count === 1 ? ' error' : ' errors')\n            }\n          )\n\n          this.notifyError(error, done, watching)\n        }\n      }))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n\n    // FIXME: even including any remnant of JSCS at this point broke everything through the unfound requirement of babel 5.x through babel-jscs.  I can't tell where this occurred, but omitting gulp-jscs for now gets me past this issue.  Revisit this when there are clear updates to use babel 6\n    //.pipe(jscs())      // enforce style guide\n    //.pipe(stylish())  // log style errors\n    //.pipe(jscs.reporter('fail')) // fail on error\n  }\n}\n\nexport default EsLint\n","import BaseRecipe from './baseRecipe'\nimport uglify from 'gulp-uglify'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\nimport sourcemaps from 'gulp-sourcemaps'\nimport concat from 'gulp-concat'\nimport extReplace from 'gulp-ext-replace'\nimport glob from 'glob'\n\nexport const Default = {\n  debug: false,\n  presetType: 'postProcessor',\n  task: {\n    name: 'uglify'\n  },\n  source: {\n    glob: '**/*.js'\n  },\n  options: {\n    compress: {\n      warnings: true\n    },\n    mangle: false,\n    preserveComments: /^!|@preserve|@license|@cc_on/i\n  },\n\n  concat: {\n    dest: undefined // if specified, will use concat to this dest filename, OTHERWISE, it will just assume one file and rename to .min.js\n  }\n}\n\n/**\n * By default, assumes ONE source glob file match, OTHERWISE specify {concat: { dest: 'out.min.js' } }\n *\n */\nconst Uglify = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  createDescription() {\n    let msg = `Uglifies ${this.config.source.options.cwd}/${this.config.source.glob} to ${this.config.dest}`\n    if (this.config.concat.dest) {\n      msg += `/${this.config.concat.dest}`\n    }\n    return msg\n  }\n\n  run(done, watching = false) {\n\n    // helpful log message if files not found\n    let files = glob.sync(this.config.source.glob, this.config.source.options)\n    if (!files || files.length <= 0) {\n      this.log(`No sources found to uglify in: ${this.dump(this.config.source)}`)\n    }\n\n    if (this.config.concat.dest) {\n\n      // run the concat scenario\n      this.debug(`concat dest: ${this.config.dest}/${this.config.concat.dest}`)\n      return this.gulp.src(this.config.source.glob, this.config.source.options)\n        .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n        .pipe(concat(this.config.concat.dest))\n\n        // identical to below\n        .pipe(sourcemaps.init())\n        .pipe(uglify(this.config.options))\n        .on('error', (error) => {\n          this.notifyError(error, done, watching)\n        })\n        .pipe(this.gulp.dest(this.config.dest))\n    }\n    else {\n\n      // run the single file scenario\n      this.debug('single file with no dest')\n\n      if (files.length > 1) {\n        throw new Error(`Should only find one file but found ${files.length} for source: ${this.dump(this.config.source)}.  Use the concat: {dest: 'output.min.js' } configuration for multiple files concatenated with uglify.  Files found: ${this.dump(files)}`)\n      }\n\n      return this.gulp.src(this.config.source.glob, this.config.source.options)\n        .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n        .pipe(extReplace('.min.js', /.js$/))  // needs to be end-of-line regex so we don't messup paths with '.js' in the names.\n\n        // identical to above\n        .pipe(sourcemaps.init())\n        .pipe(uglify(this.config.options))\n        .on('error', (error) => {\n          this.notifyError(error, done, watching)\n        })\n        .pipe(this.gulp.dest(this.config.dest))\n    }\n  }\n}\n\nexport default Uglify\n","import BaseRecipe from './baseRecipe'\nimport autoprefixer from 'gulp-autoprefixer'\nimport gulpif from 'gulp-if'\nimport debug from 'gulp-debug'\n\nexport const Default = {\n  options: {  // from bootstrap\n    browsers: [\n      //\n      // Official browser support policy:\n      // http://v4-alpha.getbootstrap.com/getting-started/browsers-devices/#supported-browsers\n      //\n      'Chrome >= 35', // Exact version number here is kinda arbitrary\n      // Rather than using Autoprefixer's native \"Firefox ESR\" version specifier string,\n      // we deliberately hardcode the number. This is to avoid unwittingly severely breaking the previous ESR in the event that:\n      // (a) we happen to ship a new Bootstrap release soon after the release of a new ESR,\n      //     such that folks haven't yet had a reasonable amount of time to upgrade; and\n      // (b) the new ESR has unprefixed CSS properties/values whose absence would severely break webpages\n      //     (e.g. `box-sizing`, as opposed to `background: linear-gradient(...)`).\n      //     Since they've been unprefixed, Autoprefixer will stop prefixing them,\n      //     thus causing them to not work in the previous ESR (where the prefixes were required).\n      'Firefox >= 31', // Current Firefox Extended Support Release (ESR)\n      // Note: Edge versions in Autoprefixer & Can I Use refer to the EdgeHTML rendering engine version,\n      // NOT the Edge app version shown in Edge's \"About\" screen.\n      // For example, at the time of writing, Edge 20 on an up-to-date system uses EdgeHTML 12.\n      // See also https://github.com/Fyrd/caniuse/issues/1928\n      'Edge >= 12',\n      'Explorer >= 9',\n      // Out of leniency, we prefix these 1 version further back than the official policy.\n      'iOS >= 8',\n      'Safari >= 8',\n      // The following remain NOT officially supported, but we're lenient and include their prefixes to avoid severely breaking in them.\n      'Android 2.3',\n      'Android >= 4',\n      'Opera >= 12'\n    ]\n  }\n}\n\nconst Autoprefixer = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done, watching = false) {\n    // FIXME: is this right or wrong?  this class initially was extracted for reuse of Default options\n    return this.gulp.src(this.config.source)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(autoprefixer(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n      .pipe(this.gulp.dest(this.config.dest))\n  }\n}\n\nexport default Autoprefixer\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport changed    from 'gulp-changed'\nimport imagemin   from 'gulp-imagemin'\nimport merge from 'merge-stream'\nimport path from 'path'\n\nexport const Default = {\n  debug: false,\n  presetType: 'images',\n  task: {\n    name: 'images'\n  },\n  watch: {\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  source: {\n    // baseDirectories: [] ** resolved from preset **\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  options: {}\n}\n\nconst Images = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createDescription() {\n    return `Minifies change images from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n\n    var tasks = this.config.baseDirectories.map((baseDirectory) => {\n      // join the base dir with the relative cwd\n      return this.runOne(done, path.join(baseDirectory, this.config.source.options.cwd), watching)\n    })\n    return merge(tasks);\n  }\n\n  runOne(done, cwd, watching) {\n\n    // setup a run with a single cwd a.k.a base directory FIXME: perhaps this could be in the base recipe? or not?\n    let options = extend({}, this.config.source.options)\n    options.cwd = cwd\n    this.debug(`src: ${cwd}/${this.config.source.glob}`)\n\n    return this.gulp.src(this.config.source.glob, options)\n      .pipe(changed(this.config.dest)) // ignore unchanged files\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(imagemin(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n      .pipe(this.gulp.dest(this.config.dest))\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default Images\n","import Base from '../base'\nimport fs from 'fs-extra'\nimport path from 'path'\nimport fileSyncCmp from 'file-sync-cmp'\nimport process from 'process'\nimport iconv from 'iconv-lite'\nimport {Buffer} from 'buffer'\nimport findup from 'findup-sync'\n\nconst isWindows = (process.platform === 'win32')\nconst pathSeparatorRe = /[\\/\\\\]/g;\n\n/**\n * Implementation can use our base class, but is exposed as static methods in the exported File class\n *\n * TODO: reducing the amount of code by using other maintained libraries would be fantastic.  Worst case, break most of this into it's own library?\n *\n *  @credit to grunt for the grunt.file implementation. See license for attribution.\n */\nconst FileImplementation = class extends Base {\n  constructor(config = {debug: false}) {\n    super({encoding: \"utf8\"}, config)\n  }\n\n  findup(glob, options = {}, fullPath = true) {\n    let f = findup(glob, options)\n    if (f && fullPath) {\n      return path.resolve(f)\n    }\n    else {\n      return f\n    }\n  }\n\n  // Read a file, optionally processing its content, then write the output.\n  copy(srcpath, destpath, options) {\n    if (!options) {\n      options = {}\n    }\n    // If a process function was specified, process the file's source.\n\n    // If the file will be processed, use the encoding as-specified. Otherwise, use an encoding of null to force the file to be read/written as a Buffer.\n    let readWriteOptions = options.process ? options : {encoding: null}\n\n    let contents = this.read(srcpath, readWriteOptions)\n    if (options.process) {\n      this.debug('Processing source...')\n      try {\n        contents = options.process(contents, srcpath)\n      }\n      catch (e) {\n        this.notifyError(`Error while executing process function on ${srcpath}.`, e)\n      }\n    }\n    // Abort copy if the process function returns false.\n    if (contents === false) {\n      this.debug('Write aborted, no contents.')\n    }\n    else {\n      this.write(destpath, contents, readWriteOptions)\n    }\n  }\n\n  syncTimestamp(src, dest) {\n    let stat = fs.lstatSync(src)\n    if (path.basename(src) !== path.basename(dest)) {\n      return\n    }\n\n    if (stat.isFile() && !fileSyncCmp.equalFiles(src, dest)) {\n      return\n    }\n\n    let fd = fs.openSync(dest, isWindows ? 'r+' : 'r')\n    fs.futimesSync(fd, stat.atime, stat.mtime)\n    fs.closeSync(fd)\n  }\n\n  write(filepath, contents, options) {\n    if (!options) {\n      options = {}\n    }\n    // Create path, if necessary.\n    this.mkdir(path.dirname(filepath))\n    try {\n      // If contents is already a Buffer, don't try to encode it. If no encoding was specified, use the default.\n      if (!Buffer.isBuffer(contents)) {\n        contents = iconv.encode(contents, options.encoding || this.config.encoding)\n      }\n      // Actually write this.\n      fs.writeFileSync(filepath, contents)\n\n      return true\n    }\n    catch (e) {\n      this.notifyError(`Unable to write ${filepath} file (Error code: ${e.code}).`, e)\n    }\n  }\n\n  // Read a file, return its contents.\n  read(filepath, options) {\n    if (!options) {\n      options = {}\n    }\n    let contents\n    this.debug(`Reading ${filepath}...`)\n    try {\n      contents = fs.readFileSync(String(filepath))\n      // If encoding is not explicitly null, convert from encoded buffer to a\n      // string. If no encoding was specified, use the default.\n      if (options.encoding !== null) {\n        contents = iconv.decode(contents, options.encoding || this.config.encoding)\n        // Strip any BOM that might exist.\n        if (!this.config.preserveBOM && contents.charCodeAt(0) === 0xFEFF) {\n          contents = contents.substring(1)\n        }\n      }\n\n      return contents\n    }\n    catch (e) {\n      this.notifyError('Unable to read \"' + filepath + '\" file (Error code: ' + e.code + ').', e)\n    }\n  }\n\n  /**\n   * Like mkdir -p. Create a directory and any intermediary directories.\n   * @param dirpath\n   * @param mode\n   */\n  mkdir(dirpath, mode) {\n    this.debug(`mkdir ${dirpath}:`)\n    // Set directory mode in a strict-mode-friendly way.\n    if (mode == null) {\n      mode = parseInt('0777', 8) & (~process.umask())\n    }\n    dirpath.split(pathSeparatorRe).reduce((parts, part) => {\n      parts += part + '/'\n      let subpath = path.resolve(parts)\n      if (!this.exists(subpath)) {\n        try {\n          this.debug(`\\tfs.mkdirSync(${subpath}, ${mode})`)\n          fs.mkdirSync(subpath, mode)\n        }\n        catch (e) {\n          this.notifyError(`Unable to create directory ${subpath} (Error code: ${e.code}).`, e)\n        }\n      }\n      else {\n        this.debug(`\\t${subpath} already exists`)\n      }\n      return parts\n    }, '')\n  }\n\n  /**\n   * Match a filepath or filepaths against one or more wildcard patterns.\n   * @returns true if any of the patterns match.\n   */\n  isMatch(...args) {\n    return this.match(...args).length > 0\n  }\n\n  exists(...args) {\n    let filepath = path.join(...args)\n    let result = fs.existsSync(filepath)\n    this.debug(`exists(${filepath})? ${result}`)\n    return result\n  }\n\n  isDir(...args) {\n    let filepath = path.join(...args)\n    return this.exists(filepath) && fs.statSync(filepath).isDirectory()\n  }\n\n  detectDestType(dest) {\n    if (dest.endsWith('/')) {\n      return 'directory'\n    }\n    else {\n      return 'file'\n    }\n  }\n}\n\n\nconst File = class {\n  static findup(glob, options = {}, fullPath = true){\n    return instance.findup(glob, options, fullPath)\n  }\n\n  static copy(srcpath, destpath, options) {\n    return instance.copy(srcpath, destpath, options)\n  }\n\n  static syncTimestamp(src, dest) {\n    return instance.syncTimestamp(src, dest)\n  }\n\n  static write(filepath, contents, options) {\n    return instance.write(filepath, contents, options)\n  }\n\n  static read(filepath, options) {\n    return instance.read(filepath, options)\n  }\n\n  static isDir(...args) {\n    return instance.isDir(...args)\n  }\n\n  static mkdir(dirpath, mode) {\n    return instance.mkdir(dirpath, mode)\n  }\n\n  static isMatch(...args) {\n    return instance.isMatch(...args)\n  }\n\n  static exists(...args) {\n    return instance.exists(...args)\n  }\n\n  static detectDestType(dest) {\n    return instance.detectDestType(dest)\n  }\n}\n\n//  singleton\nlet instance = new FileImplementation()\n\nexport default File\n","import BaseRecipe from './baseRecipe'\nimport { Default as AutoprefixerDefault } from './autoprefixer'\nimport autoprefixer from 'gulp-autoprefixer'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport sass from 'gulp-sass'\nimport sourcemaps from 'gulp-sourcemaps'\nimport gulpif from 'gulp-if'\n\nimport File from './util/file'\nconst node_modules = File.findup('node_modules')\n\nexport const Default = {\n  debug: false,\n  presetType: 'stylesheets',\n  task: {\n    name: 'sass'\n  },\n  options: {\n    // WARNING: `includePaths` this should be a fully qualified path if overriding\n    //  @see https://github.com/sass/node-sass/issues/1377\n    includePaths: [node_modules] // this will find any node_modules above the current working directory\n  },\n  // capture defaults from autoprefixer class\n  autoprefixer: {\n    options: AutoprefixerDefault.options\n  }\n}\n\nconst Sass = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createDescription() {\n    return `Compiles ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n    // add debug for importing problems (can be very helpful)\n    if(this.config.debug && this.config.options.importer === undefined) {\n      this.config.options.importer = (url, prev, done) => {\n        this.debug(`importing ${url} from ${prev}`)\n        done({file: url})\n      }\n    }\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(sourcemaps.init())\n      .pipe(sass(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n      .pipe(autoprefixer(this.config.autoprefixer.options))\n      .pipe(sourcemaps.write())\n      .pipe(this.gulp.dest(this.config.dest))\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default Sass\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\nimport scssLint from 'gulp-scss-lint'\nimport scssLintStylish from 'gulp-scss-lint-stylish'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\nimport File from './util/file'\n\nexport const Default = {\n  debug: false,\n  presetType: 'stylesheets',\n  task: {\n    name: 'scss:lint'\n  },\n  source: {\n    glob: '**/*.scss'\n  },\n  options: {\n    customReport: scssLintStylish\n  }\n}\n\nconst ScssLint = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n\n    // If a config is not specified, emulate the eslint config behavior by looking up.\n    //  If there is a config at or above the source cwd, use it, otherwise leave null.\n    if(!this.config.options.config){\n\n      let configFile = File.findup('.scss-lint.yml', {cwd: this.config.source.options.cwd})\n      if(configFile){\n        this.log(`Using config: ${configFile}`)\n        this.config.options.config = configFile\n      }\n    }\n  }\n\n  createDescription(){\n    return `Lints ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(scssLint(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n  }\n}\n\nexport default ScssLint\n","import BaseGulp from './baseGulp'\nimport Util from 'gulp-util'\nimport unique from 'array-unique'\n\nconst Default = {\n  debug: false,\n  watch: true  // register a watch task that aggregates all watches and runs the full sequence\n}\n\nconst Aggregate = class extends BaseGulp {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param configs - customized overrides\n   */\n  constructor(gulp, taskName, recipes, ...configs) {\n    super(gulp, Default, {task: {name: taskName}}, ...configs)\n\n    if (Array.isArray(recipes)) {\n      this.notifyError(`recipes must not be an array, but a function, series, or parallel, found: ${recipes}`)\n    }\n\n    // track recipes as taskFn so that aggregates can be included and resolved as part of other aggregates just like recipes\n    this.taskFn = recipes\n\n    // track recipes as `recipes` like series/parallel so metadata can be discovered\n    //this.taskFn.recipes = recipes\n\n    this.registerTask(this.taskName())\n\n    if (this.config.watch) {\n      this.registerWatchTask(this.watchTaskName())\n    }\n  }\n\n  createHelpText() {\n    //let taskNames = new Recipes().toTasks(this.taskFn)\n    //\n    //// use the config to generate the dynamic help\n    //return `Runs [${taskNames.join(', ')}]`\n    return ''\n  }\n\n  createWatchHelpText() {\n    let taskNames = this.watchableRecipes().reduce((a, b) => {\n      return a.concat(b.taskName())\n    }, [])\n\n    return Util.colors.grey(`|___ aggregates watches from [${taskNames.join(', ')}] and runs all tasks on any change`)\n  }\n\n  registerTask(taskName) {\n    //let tasks = this.toTasks(this.taskFn)\n    //this.debug(`Registering task: ${Util.colors.green(taskName)} for ${stringify(tasks)}`)\n    this.gulp.task(taskName, this.taskFn)\n    this.taskFn.displayName = taskName\n    this.taskFn.description = this.createHelpText()\n  }\n\n  watchToGlobs(recipe) {\n    // glob could be array\n    let fullGlobs = []\n    if (recipe.config.watch.glob === undefined) {\n      return fullGlobs\n    }\n    let globs = recipe.config.watch.glob\n    if (!Array.isArray(recipe.config.watch.glob)) {\n      globs = [recipe.config.watch.glob]\n    }\n\n    for (let glob of globs) {\n      fullGlobs.push(`${recipe.config.watch.options.cwd}/${glob}`)\n    }\n    return fullGlobs\n  }\n\n  registerWatchTask(watchTaskName) {\n    let coloredTask = `${Util.colors.green(watchTaskName)}`\n    // generate watch task\n    if (this.watchableRecipes().length < 1) {\n      this.debug(`No watchable recipes for task: ${coloredTask}`)\n      return\n    }\n\n    this.debug(`Registering task: ${coloredTask}`)\n\n    // aggregate all globs into an array for a single watch fn call\n    let globs = []\n    for (let recipe of this.watchableRecipes()) {\n      globs = globs.concat(this.watchToGlobs(recipe))\n    }\n\n    globs = unique(globs)\n    this.debugDump('globs', globs)\n\n    let watchFn = () => {\n      this.log(`${coloredTask} watching ${globs.join(', ')}`)\n      let watcher = this.gulp.watch(globs, {}, (done) => {\n\n        // set this global so that BasGulp#notifyError can make sure not to exit if we are watching\n        this.gulp.watching = true\n        this.debug(`setting gulp.watching: ${this.gulp.watching}`)\n        let result = this.taskFn(done)\n        return result\n      })\n\n      // watcher.on('error', (error) => {\n      //   this.notifyError(`${coloredTask} ${error}`)\n      // })\n\n      watcher.on('add', (path) => {\n        this.log(`${coloredTask} ${path} was added, running...`)\n      })\n\n      watcher.on('change', (path) => {\n        this.log(`${coloredTask} ${path} was changed, running...`)\n      })\n      watcher.on('unlink', (path) => {\n        this.log(`${coloredTask} ${path} was deleted, running...`)\n      })\n\n      return watcher\n    }\n\n    watchFn.displayName = `<${watchTaskName}>`\n    watchFn.description = this.createWatchHelpText()\n    return this.gulp.task(watchTaskName, watchFn)\n  }\n\n  flatten(list) {\n    // parallel and series set `.recipes` on the function as metadata\n    let callback = (prev, current) => {\n      let item = current\n\n      // Flatten any series/parallel\n      if (typeof current === \"function\" && current.recipes) {\n        this.debugDump(`flatten function recipes`, current.recipes)\n        item = this.flatten(current.recipes)\n      }\n      // Flatten any Aggregate object - exposes a taskFn (which should be a series/parallel)\n      else if (current.taskFn && current.taskFn.recipes) {\n        this.debugDump(`flatten ${current.constructor.name} with taskFn.recipes`, current.taskFn.recipes)\n        item = this.flatten(current.taskFn.recipes)\n      }\n      //else {\n      //  if (current.taskFn) {\n      //    this.debugDump(`flatten something WITH taskFn`, current)\n      //\n      //    if(current.taskFn.recipes){\n      //      this.debugDump(`flatten something WITH taskFn.recipes`, current.taskFn.recipes)\n      //    }\n      //  }\n      //  else if (current.recipes) {\n      //    this.debugDump(`flatten something WITH recipes but not a fn`, current)\n      //  }\n      //  else if (current && current.constructor) {\n      //    this.debugDump(`flatten ${current.constructor.name} with no recipes`, current)\n      //  }\n      //  else if (Array.isArray(current)) {\n      //    this.debugDump(`flatten array with no recipes`, current)\n      //  }\n      //  else {\n      //    this.debugDump(`flatten ???`, current)\n      //  }\n      //}\n      return prev.concat(item)\n    }\n\n    return list.reduce(callback, [])\n  }\n\n  flattenedRecipes() {\n    let recipes = this.flatten([this.taskFn])\n    this.debugDump(`flattenedRecipes`, recipes)\n    return recipes\n  }\n\n  watchableRecipes() {\n    // create an array of watchable recipes\n    let watchableRecipes = []\n    for (let recipe of this.flattenedRecipes()) {\n      if ((typeof recipe !== \"string\") && (typeof recipe !== \"function\") && recipe.config.watch) {\n        watchableRecipes.push(recipe)\n      }\n    }\n    return watchableRecipes\n  }\n}\n\nexport default Aggregate\n","import BaseRecipe from './baseRecipe'\nimport { rollup } from 'rollup'\n//import BrowserSync from 'browser-sync'\nimport extend from 'extend'\nimport glob from 'glob'\nimport nodeResolve from 'rollup-plugin-node-resolve'\nimport commonjs from 'rollup-plugin-commonjs'\nimport process from 'process'\nimport File from './util/file'\nconst node_modules = File.findup('node_modules')\n\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts',\n  task: {\n    name: 'rollup:es'\n  },\n  options: {\n    //entry: 'src/index.js', // ** resolved from the source glob/cwd **\n    //dest: '', // ** resolved from preset **\n    sourceMap: true,\n    format: 'es6',\n    plugins: []\n  }\n}\n\n// This nodeResolve configuration is not used unless it is within the plugins: [nodeResolve(this.config.nodeResolve.options)] - pass this.config.nodeResolve.enabled == true in config to enable default options\nexport const NodeResolve = {\n  nodeResolve: {\n    enabled: false,\n\n    // - see https://github.com/rollup/rollup-plugin-node-resolve\n    options: {\n      // use \"jsnext:main\" if possible\n      // – see https://github.com/rollup/rollup/wiki/jsnext:main\n      jsnext: true,\n\n      // use \"main\" field or index.js, even if it's not an ES6 module (needs to be converted from CommonJS to ES6\n      // – see https://github.com/rollup/rollup-plugin-commonjs\n      main: true,\n\n      //skip: [ 'some-big-dependency' ], // if there's something your bundle requires that you DON'T want to include, add it to 'skip'\n\n      // By default, built-in modules such as `fs` and `path` are treated as external if a local module with the same name\n      // can't be found. If you really want to turn off this behaviour for some reason, use `builtins: false`\n      builtins: false,\n\n      // Some package.json files have a `browser` field which specifies alternative files to load for people bundling\n      // for the browser. If that's you, use this option, otherwise pkg.browser will be ignored.\n      browser: true,\n\n      // not all files you want to resolve are .js files\n      extensions: ['.js', '.json']\n    }\n  }\n}\n\nexport const CommonJs = {\n  commonjs: {\n    enabled: false,\n    options: {\n      include: `${node_modules}/**`,\n      //exclude: [ `${node_modules}/foo/**', `${node_modules}/bar/**` ],\n\n      // search for files other than .js files (must already be transpiled by a previous plugin!)\n      extensions: ['.js'] // defaults to [ '.js' ]\n    }\n  }\n}\n\nconst RollupEs = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    let config = extend(true, {}, ...configs)\n\n    if (!config.options.dest) {\n      throw new Error(`options.dest filename must be specified.`)\n    }\n\n    super(gulp, preset, Default, NodeResolve, CommonJs, config)\n\n    // Utilize the presets to get the dest cwd/base directory, then add the remaining passed-in file path/name\n    this.config.options.dest = `${this.config.dest}/${this.config.options.dest}`\n\n    //----------------------------------------------\n    // plugins order: nodeResolve, commonjs, babel\n\n    // Add commonjs before babel\n    if (this.config.commonjs.enabled) {\n      this.debug('Adding commonjs plugin')\n      // add at the beginning\n      this.config.options.plugins.unshift(commonjs(this.config.commonjs.options))\n    }\n\n    // Add nodeResolve before (commonjs &&|| babel)\n    if (this.config.nodeResolve.enabled) {\n      this.debug('Adding nodeResolve plugin')\n      // add at the beginning\n      this.config.options.plugins.unshift(nodeResolve(this.config.nodeResolve.options))\n    }\n\n    //this.browserSync = BrowserSync.create()\n  }\n\n  resolveEntry() {\n    // Resolve the source and make sure there is one entry point\n    if (Array.isArray(this.config.source.glob)) {\n      throw new Error(`Rollup only accepts one entry point.  Found array for source.glob: ${this.config.source.glob}`)\n    }\n    // get full path results\n    this.config.source.options['realpath'] = true\n\n    let entry = glob.sync(this.config.source.glob, this.config.source.options)\n\n    if (!entry || entry.length <= 0) {\n      throw new Error(`Unable to resolveEntry() for source: ${this.dump(this.config.source)} from ${process.cwd()}`)\n    }\n\n    if (entry.length > 1) {\n      throw new Error(`resolveEntry() should only find one entry point but found ${entry} for source: ${this.dump(this.config.source)}`)\n    }\n    return entry[0]\n  }\n\n  createDescription() {\n    return `Rollup ${this.config.source.options.cwd}/${this.config.source.glob} in the ${this.config.options.format} format to ${this.config.options.dest}`\n  }\n\n  run(done, watching = false) {\n    this.debug(`watching? ${watching}`)\n    let options = extend(true, {\n        entry: this.resolveEntry(),\n        onwarn: (message) => {\n          //this.notifyError(message, watching)\n          this.log(message)\n        }\n      },\n      this.config.options)\n\n    this.logDebugOptions(options)\n\n    return rollup(options)\n      .then((bundle) => {\n        return bundle.write(options)\n      })\n      .catch((error) => {\n        error.plugin = 'rollup'\n        this.notifyError(error, done, watching)\n      })\n  }\n\n  /**\n   * This is rather elaborate, but useful.  It strings together the options used to run rollup for debugging purposes.\n   *\n   * @param options\n   */\n  logDebugOptions(options) {\n    if (!this.config.debug) {\n      return\n    }\n\n    let prunedOptions = extend(true, {}, options)\n    prunedOptions.plugins = 'x' // placeholder to replace\n\n    let plugins = `plugins: [ // (count: ${this.config.options.plugins.length})\\n`\n    if (this.config.commonjs.enabled) {\n      plugins += `\\t\\tcommonjs(${this.dump(this.config.commonjs.options)}),\\n`\n    }\n    if (this.config.nodeResolve.enabled) {\n      plugins += `\\t\\tnodeResolve(${this.dump(this.config.nodeResolve.options)}),\\n`\n    }\n    if (this.config.babelOptions) {\n      plugins += `\\t\\tbabel(${this.dump(this.config.babelOptions)}),\\n`\n    }\n    plugins += `],\\n`\n\n\n    let display = this.dump(prunedOptions)\n    display = display.replace(\"plugins: 'x',\", plugins)\n    this.debug(`Executing rollup with options: ${display}`)\n  }\n}\n\nexport default RollupEs\n","import RollupEs from './rollupEs'\nimport Preset from './preset'\nimport babel from 'rollup-plugin-babel';\n\nexport const Default = {\n  task: {\n    name: 'rollup:cjs'\n  },\n  presetType: 'javascripts',\n  babelOptions: {\n    babelrc: false,\n    presets: ['es2015-rollup']\n  },\n  options: {\n    //dest: '', // required\n    format: 'cjs'\n    //plugins: [babel({\n    //  babelrc: false,\n    //  presets: ['es2015-rollup']\n    //})]\n  },\n  nodeResolve: {\n    enabled: false // bundle a full package with dependencies?\n  },\n  commonjs: {\n    enabled: false // convert dependencies to commonjs modules for rollup\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupCjs = class extends RollupEs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    let config = Preset.resolveConfig(preset, Default, ...configs)\n    super(gulp, preset, Default, {\n        options: {\n          plugins: [babel(config.babelOptions)]\n        }\n      },\n      ...configs)\n  }\n}\n\nexport default RollupCjs\n","import RollupCjs from './rollupCjs'\n\nexport const Default = {\n  task: {\n    name: 'rollup:cjs-bundled'\n  },\n  nodeResolve: {\n    enabled: true // bundle a full package with dependencies? (if not use RollupCjs itself)\n  },\n  commonjs: {\n    enabled: true // convert dependencies to commonjs modules for rollup\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupCjsBundled = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default RollupCjsBundled\n","import RollupCjsBundled from './rollupCjsBundled'\n\nexport const Default = {\n  task: {\n    name: 'rollup:iife'\n  },\n  options: {\n    //dest: '', // required\n    format: 'iife'\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupIife = class extends RollupCjsBundled {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default RollupIife\n","import RollupCjs from './rollupCjs'\n\nexport const Default = {\n  task: {\n    name: 'rollup:amd'\n  },\n  options: {\n    //dest: '', // required\n    format: 'amd'\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupAmd = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default RollupAmd\n","import RollupCjs from './rollupCjs'\n\nexport const Default = {\n  task: {\n    name: 'rollup:umd'\n  },\n  options: {\n    //dest: '', // required\n    format: 'umd'\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupUmd = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default RollupUmd\n","import BaseRecipe from './baseRecipe'\nimport File from './util/file'\nimport extend from 'extend'\n//import fs from 'fs-extra'\nimport path from 'path'\nimport chalk from 'chalk'\nimport process from 'process'\nimport globAll from 'glob-all'\nimport fs from 'fs-extra'\n\nconst Default = {\n  debug: false,\n  watch: false,\n  presetType: 'macro',\n  task: {\n    name: 'copy'\n  },\n  process: (content, srcpath) => {  // eslint-disable-line no-unused-vars\n    return content\n  }, // allows modification of the file content before writing to destination\n  encoding: 'utf8',\n  mode: false,            // True will copy the existing file/directory permissions, otherwise set the mode e.g. 0644\n  timestamp: false,       // Preserve the timestamp attributes(atime and mtime) when copying files. Timestamp will not be preserved\n  //                        //    when the file contents or name are changed during copying.\n  //preserveBOM: false,     // Whether to preserve the BOM on this.read rather than strip it.\n\n  source: {\n    glob: undefined,      // [] or string glob pattern, uses node-glob-all https://github.com/jpillora/node-glob-all#usage\n    options: {            // https://github.com/isaacs/node-glob#options\n      cwd: process.cwd()  // base path\n    }\n  },\n  dest: undefined,         // base path\n  options: {}\n}\n\n/**\n *  Copy files to a destination with permissions and processing options.\n *\n *  TODO: reducing the amount of code by using other maintained libraries would be fantastic.  Worst case, break most of this into it's own library?\n *\n *  @credit to grunt and grunt-contrib-copy for the implementation. See license for attribution.\n */\nconst Copy = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n\n    this.requireValue(this.config.source.glob, `source.glob`)\n    this.requireValue(this.config.source.options.cwd, `source.options.cwd`)\n    this.requireValue(this.config.dest, `dest`)\n\n    // ensure array\n    if (!Array.isArray(this.config.source.glob)) {\n      this.config.source.glob = [this.config.source.glob]\n    }\n  }\n\n  createDescription() {\n    return `Copies ${this.config.source.options.cwd}/${this.config.source.glob} to ${this.config.dest}`\n  }\n\n  chmod(from, to) {\n    if (this.config.mode !== false) {\n      fs.chmodSync(to, (this.config.mode === true) ? fs.lstatSync(from).mode : this.config.mode)\n    }\n  }\n\n  run(done) {\n    try {\n      let dirs = {}\n      let tally = {\n        dirs: 0,\n        files: 0\n      }\n      let copyOptions = {\n        encoding: this.config.encoding,\n        process: this.config.process\n      }\n\n      let options = extend(true, {}, this.config.source.options, {realpath: true})\n      let pattern = this.config.source.glob\n\n      // ensure pattern is an array\n      if (!Array.isArray(pattern)) {\n        pattern = [pattern]\n      }\n\n      // make a copy so that nothing processing will alter the config values\n      pattern = pattern.slice()\n\n      this.log(`Copying ${options.cwd}/${pattern}...`)\n      //this.debugDump(`this config: `, this.config)\n\n      for (let fromFullPath of globAll.sync(pattern, options)) {\n        let from = path.relative(process.cwd(), fromFullPath)\n        let toRelative = path.relative(options.cwd, from) // grab the path of the file relative to the cwd of the source cwd - allows nesting\n        let to = path.join(this.config.dest, toRelative)\n\n        if (File.isDir(from)) {\n          this.log(`\\t${chalk.cyan(to)}`)\n          File.mkdir(to)\n          this.chmod(from, to)\n          dirs[from] = to\n          tally.dirs++\n        }\n        else {\n          this.log(`\\t-> ${chalk.cyan(to)}`)\n          File.copy(from, to, copyOptions)\n          if (this.config.timestamp) {\n            File.syncTimestamp(from, to)\n          }\n          this.chmod(from, to)\n          tally.files++\n        }\n      }\n\n      if (this.config.timestamp) {\n        for (let from of Object.keys(dirs)) {\n          File.syncTimestamp(from, dirs[from])\n        }\n      }\n\n      let msg = ''\n      if (tally.dirs) {\n        msg += `Created ${chalk.cyan(tally.dirs.toString()) + (tally.dirs === 1 ? ' directory' : ' directories')}`\n      }\n\n      if (tally.files) {\n        msg += (tally.dirs ? ', copied ' : 'Copied ') + chalk.cyan(tally.files.toString()) + (tally.files === 1 ? ' file' : ' files')\n      }\n\n      this.log(msg)\n      this.donezo(done)\n    }\n    catch (error) {\n      this.notifyError(error, done)\n    }\n  }\n}\n\nexport default Copy\n","import BaseRecipe from './baseRecipe'\nimport Preset from './preset'\nimport del from 'del'\n\nexport const Default = {\n  presetType: `macro`, // allows direct instantiation\n  debug: false,\n  task: false,\n  watch: false,\n  sync: true,  // necessary so that tasks can be run in a series, can be overriden for other purposes\n  options: {}\n}\n\nconst BaseClean = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    let config = Preset.resolveConfig(preset, Default, ...configs)\n    let destGlob = {} // assume no glob - directory and contents will be deleted\n    if(config.glob){\n      destGlob = {dest: `${config.dest}/${config.glob}`}\n    }\n    super(gulp, preset, config, destGlob)\n  }\n\n  createDescription(){\n    // use the config to generate the dynamic help\n    return `Cleans ${this.config.dest}`\n  }\n\n  run(done, watching = false) {\n    if (this.config.sync) {\n      this.debug(`deleting ${this.config.dest}`)\n      let paths = del.sync(this.config.dest, this.config.options)\n      this.logDeleted(paths)\n    }\n    else {\n      this.debug(`deleting ${this.config.dest}`)\n      return del(this.config.dest, this.config.options)\n        .then((paths) => {\n          this.logDeleted(paths)\n        })\n        .catch((error) => {\n          error.plugin = 'del'\n          this.notifyError(error, watching)\n        })\n    }\n\n    this.donezo(done)\n  }\n\n  logDeleted(paths) {\n    if (paths.length > 0) {\n      this.log(`Deleted files and folders:`)\n      for(let path of paths){\n        this.log(`    ${path}`)\n      }\n    }\n  }\n}\n\nexport default BaseClean\n","import BaseClean from './baseClean'\n\nexport const Default = {\n  presetType: 'images',\n  task: {\n    name: 'clean:images'\n  }\n}\n\nconst CleanImages = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default CleanImages\n","import BaseClean from './baseClean'\n\nexport const Default = {\n  presetType: 'stylesheets',\n  task: {\n    name: 'clean:stylesheets'\n  },\n  glob: '**/*.css'\n}\n\nconst CleanStylesheets = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default CleanStylesheets\n","import BaseClean from './baseClean'\n\nexport const Default = {\n  presetType: 'javascripts',\n  task: {\n    name: 'clean:javascripts'\n  },\n  glob: '**/*.js'\n}\n\nconst CleanJavascripts = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default CleanJavascripts\n","import BaseClean from './baseClean'\n\nexport const Default = {\n  presetType: 'postProcessor',\n  task: {\n    name: 'clean:digest'\n  }\n}\n\nconst CleanDigest = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n}\n\nexport default CleanDigest\n","import Base from '../base'\n\nconst Recipes = class extends Base {\n\n  constructor(config = {debug: false}) {\n    super(config)\n  }\n\n  /**\n   * Prefer to return the taskFn instead of a string, but return the string if that's all that is given to us.\n   *\n   * @param recipeOrAggregateOrString\n   * @returns {*}\n   */\n  toTask(recipeOrAggregateOrString) {\n    let task = null\n    if (typeof recipeOrAggregateOrString === \"string\") {\n      // any given task name should be returned as-is\n      task = recipeOrAggregateOrString\n      this.debug(`toTask(): ${task}`)\n    }\n    else {\n      if (recipeOrAggregateOrString.taskFn) {\n        // recipes and aggregates expose a taskFn\n        task = recipeOrAggregateOrString.taskFn\n      }\n      else if (typeof recipeOrAggregateOrString === \"function\") {\n        // any given fn should be return as-is i.e. series/parallel\n        task = recipeOrAggregateOrString\n      }\n\n      this.debug(`toTask(): ${task.name || task.displayName}`)\n    }\n    return task\n  }\n\n  /**\n   * Yield the nearest set of task names - return nested series/parallel fn - do not follow them and flatten them (they will do that themselves if using the helper methods)\n   *\n   * @param recipes\n   * @returns {Array}\n   */\n  toTasks(recipes, tasks = []) {\n    this.debugDump('toTasks: recipes', recipes)\n\n    for (let recipe of recipes) {\n      //this.debugDump(`recipe taskName[${recipe.taskName? recipe.taskName() : ''}] isArray[${Array.isArray(recipe)}]`, recipe)\n      if (Array.isArray(recipe)) {\n        tasks.push(this.toTasks(recipe, []))\n      }\n      else {\n        let taskName = this.toTask(recipe)\n        tasks.push(taskName)\n      }\n    }\n\n    return tasks\n  }\n}\n\nexport default Recipes\n","import Recipes from './recipes'\n\n/**\n *\n * @param recipes - (recipes or task fns, or task names)\n */\nconst parallel = (gulp, ...recipes) => {\n   let parallel = gulp.parallel(new Recipes().toTasks(recipes))\n\n  // hack to attach the recipes for inspection by aggregate\n  parallel.recipes = recipes\n  return parallel\n}\nparallel.displayName = `<parallel>`\n\nexport default parallel\n","import Aggregate from './aggregate'\nimport Preset from './preset'\nimport CleanImages from './cleanImages'\nimport CleanStylesheets from './cleanStylesheets'\nimport CleanJavascripts from './cleanJavascripts'\nimport CleanDigest from './cleanDigest'\nimport parallel from './util/parallel'\n\nconst Default = {\n  debug: false,\n  watch: false,\n  presetType: 'macro',\n  task: {\n    name: 'clean',\n    description: 'Cleans images, stylesheets, and javascripts.'\n  }\n}\n\nconst Clean = class extends Aggregate {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    let config = Preset.resolveConfig(preset, Default, ...configs)\n    let recipes = parallel(gulp,\n      new CleanImages(gulp, preset, ...configs),\n      new CleanStylesheets(gulp, preset, ...configs),\n      new CleanJavascripts(gulp, preset, ...configs),\n      new CleanDigest(gulp, preset, ...configs)\n    )\n\n    super(gulp, config.task.name, recipes, config)\n  }\n}\n\nexport default Clean\n","import BaseClean from '../baseClean'\n\n/**\n * Simplified clean() that uses the BaseClean recipe\n */\nconst clean = (gulp, name, options = {}) => {\n  let c = new BaseClean(gulp, {}, {dest: name, options: {force: true}}, options)\n  // set the display name so it shows up in the task list\n  c.taskFn.displayName = `<clean>`\n  return c\n}\n\nexport default clean\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport rev   from 'gulp-rev'\n\nexport const Default = {\n  debug: false,\n  presetType: 'postProcessor',\n  task: {\n    name: 'rev'\n  },\n  watch: {\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n      ignore: ['**/digest', '**/digest/**', '**/*.map']\n    }\n  },\n  source: {\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n      ignore: ['**/digest', '**/digest/**', '**/*.map']\n    }\n  },\n  options: {\n    merge: true,\n    path: 'rev-manifest.json'\n  }\n}\n\nconst Rev = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n    this.browserSync = BrowserSync.create()\n  }\n\n  createDescription() {\n    return `Adds revision digest to assets from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n    this.debugDump(`gulp.src ${this.config.source.glob}`, this.config.source.options)\n\n\n    // base is not working    https://github.com/sindresorhus/gulp-rev/issues/150\n    //let manifestOptions = extend(true, {}, {base: this.config.dest}, this.config.options)\n\n    // workaround\n    let manifestOptions = extend(true, {},\n      this.config.options,\n      {\n        base: this.config.dest,\n        path: `${this.config.dest}/${this.config.options.path}`\n      }\n    )\n\n    this.debugDump(`manifestOptions`, manifestOptions)\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(rev(this.config.options))\n      .pipe(this.gulp.dest(this.config.dest))\n\n      // Merge with an existing unless merge == false\n      .pipe(rev.manifest(manifestOptions))\n      .pipe(this.gulp.dest(this.config.dest))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default Rev\n","import BaseRecipe from './baseRecipe'\nimport Preset from './preset'\nimport extend from 'extend'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\nimport revReplace   from 'gulp-rev-replace'\n\nexport const Default = {\n  debug: false,\n  presetType: 'postProcessor',\n  task: {\n    name: 'rev:replace'\n  },\n  watch: false,\n  source: { // cwd/ignore defaulted from preset set in constructor\n    glob: '**'\n  },\n  manifest: 'rev-manifest.json', // file name only\n  options: {}\n}\n\nconst RevReplace = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    let resolvedPreset = Preset.resolveConfig(preset, Default, ...configs)\n    super(gulp, preset,\n      Default,\n      {\n        source: {\n          options: { // replace everything in the postProcessor dest folder (except manifest)\n            cwd: resolvedPreset.dest,\n            ignore: [`**/${resolvedPreset.manifest}`]\n          }\n        }\n      },\n      ...configs)\n  }\n\n  createDescription() {\n    return `Adds revision digest to assets from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n\n    this.debugDump(`gulp.src ${this.config.source.glob}`, this.config.source.options)\n\n    // options.manifest has to originate from gulp.src\n    let options = extend(true, {},\n      {\n        // full path to the manifest file\n        manifest: this.gulp.src(`${this.config.dest}/${this.config.manifest}`)\n      },\n      this.config.options\n    )\n\n    this.debugDump(`revReplace options`, options)\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(revReplace(options))\n      .pipe(this.gulp.dest(this.config.dest))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n  }\n}\n\nexport default RevReplace\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport replace from 'gulp-replace'\nimport cssnano from 'gulp-cssnano'\nimport extReplace from 'gulp-ext-replace'\n\nexport const Default = {\n  debug: false,\n  minExtension: true, // replace extension .css with .min.css\n  presetType: 'postProcessor',\n  task: {\n    name: 'css:nano'\n  },\n  watch: false, // typical use has this at the end of a pipeline, allowing watch here can cause infinite loops on aggregates\n  //watch: {\n  //  glob: ['**/*.css'],\n  //  options: {\n  //    //cwd: ** resolved from preset **\n  //  }\n  //},\n  source: {\n    glob: ['**/*.css', '!**/*.min.css'],\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  options: {\n    //autoprefixer: false // assume this is done with Sass recipe\n    // sourcemap: false\n  }\n}\n\n/**\n * Recipe to be run after Rev or any other that places final assets in the digest destination directory\n */\nconst CssNano = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createDescription() {\n    return `Minifies digest css from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(done, watching = false) {\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(gulpif(this.config.minExtension, extReplace('.min.css')))\n      // whack the sourcemap otherwise it gives us \"Unsupported source map encoding charset=utf8;base64\"\n      // ...we don't want it in the min file anyway\n      .pipe(replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, ''))\n      .pipe(cssnano(this.config.options))\n      .pipe(this.gulp.dest(this.config.dest))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default CssNano\n","import BaseRecipe from './baseRecipe'\nimport Preset from './preset'\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts'\n}\n\nconst BaseMocha = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    // resolve watch cwd based on test cwd\n    super(gulp, preset,\n      Default,\n      {watch: {options: {cwd: Preset.resolveConfig(preset, Default, ...configs).test.options.cwd}}},\n      ...configs)\n  }\n\n  createDescription() {\n    return `Tests ${this.config.test.options.cwd}/${this.config.test.glob}`\n  }\n}\n\nexport default BaseMocha\n","import BaseMocha from './baseMocha'\nimport mocha from 'gulp-mocha'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\n\nexport const Default = {\n  task: {\n    name: 'mocha'\n  },\n  options: {\n    reporter: 'nyan'\n  }\n}\n\nconst Mocha = class extends BaseMocha {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done, watching = false) {\n    let bundle = this.gulp.src(this.config.test.glob, this.config.test.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(mocha(this.config.options)) // gulp-mocha needs filepaths so you can't have any plugins before it\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n\n    return bundle\n  }\n}\n\nexport default Mocha\n","import BaseMocha from './baseMocha'\nimport mochaPhantomJS from 'gulp-mocha-phantomjs'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\n\nexport const Default = {\n  test: {\n    glob: 'testrunner.html'\n  },\n  task: {\n    name: 'mocha:phantomjs'\n  },\n  options: {\n    reporter: 'nyan'\n  }\n}\n\n/*\nWARNING: Using this means using a browser, and if your tests are written in ES2015 you need to use rollup first!\n*/\nconst MochaPhantomJs = class extends BaseMocha {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param configs - customized overrides for this recipe\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done, watching = false) {\n    let bundle = this.gulp.src(this.config.test.glob, this.config.test.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(mochaPhantomJS(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, done, watching)\n      })\n\n    return bundle\n  }\n}\n\nexport default MochaPhantomJs\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\n\n/**\n *  This is the base for publish recipes using BuildControl\n */\nexport const Default = {\n\n  dir: 'build', // directory to assemble the files - make sure to add this to your .gitignore so you don't publish this to your source branch\n  source: {\n    types: ['javascripts', 'stylesheets'], // source types to resolve from preset and copy into the build directory pushing to the dist branch\n    files: ['.travis.yml', 'package.json', 'bower.json', 'LICENSE*', 'dist'] // any additional file patterns to copy to `dir`\n    /*\n     # NOTE: we need .travis.yml so that travis-ci will process the ignore branches\n     *  add the following:\n     *\n     *   # remove the dist branch and dist tags from travis builds\n     *   branches:\n     *    except:\n     *       - dist\n     *       - /^v(\\d+\\.)?(\\d+\\.)?(\\*|\\d+)$/\n     */\n  },\n  watch: false,\n  presetType: 'macro',\n  options: { // see https://github.com/alienfast/build-control/blob/master/src/buildControl.js#L11\n    //cwd: 'build', // Uses recipe's dir\n    branch: 'dist',\n    tag: {\n      existsFailure: false\n    },\n    clean: {\n      before: true,\n      after: false\n    }\n  }\n}\n\nconst BasePublish = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n\n    // use the dir as the cwd to the BuildControl class\n    this.config.options = extend(true, {debug: this.config.debug, cwd: this.config.dir}, this.config.options)\n  }\n}\n\nexport default BasePublish\n","import BasePublish from './basePublish'\nimport {BuildControl} from 'build-control'\nimport extend from 'extend'\n\nconst Default = {\n  task: {\n    name: 'prepublish',\n    description: 'Checks tag name and ensures directory has all files committed.'\n  },\n  options: {\n    tag: {\n      existsFailure: true\n    }\n  }\n}\n\n/**\n *  This recipe will run a preflight check on publishing to ensure tag name and commits are ready to go.\n *\n *  Run this before long running tests to error your build quickly.\n */\nconst Prepublish = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, extend(true, {}, Default, ...configs))\n  }\n\n  run(done) {\n    let buildControl = new BuildControl(this.config.options)\n    buildControl.prepublishCheck()\n\n    this.donezo(done)\n  }\n}\n\nexport default Prepublish\n","import BasePublish from './basePublish'\nimport {BuildControl} from 'build-control'\nimport fs from 'fs-extra'\nimport path from 'path'\nimport process from 'process'\nimport pathIsAbsolute from 'path-is-absolute'\nimport glob from 'glob'\n\n\n/**\n *  This recipe will keep your source branch clean but allow you to easily push your\n *  dist files to a separate branch, all while keeping track of the origin commits.\n *\n *  Did I mention it will autotag based on your package.json?\n *\n *  Typically, your build tools put compiled files in dist.  A clean build packages typically needs to consist of\n *  1. package metadata - package.json or bower.json\n *  2. license\n *  3. compiled dist files\n *  4. source files - Javascript ES projects, as well as SCSS libraries for example need to publish source\n *\n *  To keep your source branch clean with this recipe's default configuration, add the following to .gitignore:\n *  - build\n *  - dist\n *\n *  Run this recipe, it will delete/create the `build` dir, copy the files above, and commit/push (changes from remote)\n *  to the `dist` branch.  Now you have clean separation of source and dist.\n *\n *  Have long running maintenance on an old version?  Publish to a different dist branch like { options: {branch: 'dist-v3'} }\n *\n *  Travis-CI note: add the following:\n *\n *   # remove the dist branch and dist tags from travis builds\n *   branches:\n *    except:\n *       - dist\n *       - /^v(\\d+\\.)?(\\d+\\.)?(\\*|\\d+)$/\n *\n */\nconst Default = {\n  //debug: true,\n  npm: {\n    bump: true,\n    publish: true\n  },\n  readme: {\n    enabled: true,\n    name: 'README.md',\n    template: `# %sourceName%\n\n%sourceTagLink% built from commit %sourceCommitLink% on branch \\`%sourceBranch%\\`. See the [README](../..) for more details\n\n---\n<sup>Built and published by [gulp-pipeline](https://github.com/alienfast/gulp-pipeline) using [build-control](https://github.com/alienfast/build-control)</sup>\n`\n  },\n  task: {\n    name: 'publish:build',\n    description: 'Assembles and pushes the build to a branch'\n  }\n}\n\nconst PublishBuild = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done) {\n    let buildControl = new BuildControl(this.config.options)\n\n    // bump the version and commit to git\n    if(this.config.npm.bump) {\n      buildControl.npm.bump()\n    }\n\n    this.prepareBuildFiles()\n\n    this.generateReadme(buildControl)\n\n    // run the commit/tagging/pushing\n    buildControl.run()\n\n    // publish to npm\n    if(this.config.npm.publish) {\n      buildControl.npm.publish()\n    }\n\n    done()\n  }\n\n  generateReadme(buildControl) {\n    // generate a readme on the branch if one is not copied in.\n    if (this.config.readme.enabled) {\n      let readme = path.join(this.config.dir, this.config.readme.name)\n      if (fs.existsSync(readme)) {\n        this.log(`Found readme at ${readme}.  Will not generate a new one from the template.  Turn this message off with { readme: {enabled: false} }`)\n      }\n      else {\n        fs.writeFileSync(readme, buildControl.interpolate(this.config.readme.template))\n      }\n    }\n  }\n\n  /**\n   * Copy all the configured sources to the config.dir directory\n   */\n  prepareBuildFiles() {\n    let buildDir = this.config.dir\n    this.debug(`Using build directory: ${buildDir}`)\n\n    // copy preset type files\n    for (let type of this.config.source.types) {  // defaulted in BasePublish\n      let typePreset = this.preset[type]\n\n      this.log(`Copying ${typePreset.source.options.cwd}/${typePreset.source.all}...`)\n      for (let name of glob.sync(typePreset.source.all, typePreset.source.options)) {\n        let from = path.join(typePreset.source.options.cwd, name)\n        let to = path.join(buildDir, from)\n        this.log(`\\t...to ${to}`)\n        fs.copySync(from, to)\n      }\n    }\n\n    // copy any additional configured files\n    for (let fileGlob of this.config.source.files) { // defaulted in BasePublish\n\n      this.log(`Copying ${fileGlob}...`)\n      for (let fromFullPath of glob.sync(fileGlob, {realpath: true})) {\n        let from = path.relative(process.cwd(), fromFullPath)\n        let to = path.join(buildDir, from)\n        this.log(`\\t...to ${to}`)\n        fs.copySync(from, to)\n      }\n    }\n  }\n\n  resolvePath(cwd, base = process.cwd()) {\n    if (!pathIsAbsolute(cwd)) {\n      return path.join(base, cwd)\n    }\n    else {\n      return cwd\n    }\n  }\n}\n\nexport default PublishBuild\n","import BasePublish from './basePublish'\nimport {Npm} from 'build-control'\n\nconst Default = {\n  task: {\n    name: 'publish:npm',\n    description: 'Publishes package on npm'\n  },\n  options: {}\n}\n\n/**\n *  This recipe will run execute `npm publish` with no other checks.\n *\n *  @see also PublishBuild - it will bump, publish build, and publish npm (all in one)\n */\nconst PublishNpm = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done) {\n    let npm = new Npm(this.config.options)\n    npm.publish()\n    this.donezo(done)\n  }\n}\n\nexport default PublishNpm\n","import BasePublish from './basePublish'\nimport {BuildControl} from 'build-control'\n\n\n/**\n *  This recipe will keep your source branch clean but allow you to easily push your\n *  _gh_pages files to the gh-pages branch.\n */\nconst Default = {\n  //debug: true,\n  task: {\n    name: 'publish:gh-pages',\n    description: 'Publishes a _gh_pages directory to gh-pages branch'\n  },\n  options: {\n    cwd: '_gh_pages',\n    branch: 'gh-pages',\n    tag: false, // no tagging on gh-pages push\n    clean: { // no cleaning of cwd, it is built externally\n      before: false,\n      after: true  // we create a git repo, and without cleaning, subsequent runs will fail with \"uncommitted changes\"\n    }\n  }\n}\n\nconst PublishGhPages = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done) {\n    let buildControl = new BuildControl(this.config.options)\n\n    // run the commit/tagging/pushing\n    buildControl.run()\n\n    done()\n  }\n}\n\nexport default PublishGhPages\n","import BaseRecipe from './baseRecipe'\nimport tmp from 'tmp'\nimport fs from 'fs-extra'\nimport process from 'process'\nimport Ruby from './ruby/ruby'\n\nconst Default = {\n  watch: false,\n  presetType: 'macro',\n  task: {\n    name: 'jekyll',\n    description: 'Builds a jekyll site'\n  },\n  cwd: process.cwd(),\n  options: {\n    baseCommand: 'bundle exec',\n    config: '_config.yml',\n    incremental: false,\n    raw: undefined // 'baseurl: \"/bootstrap-material-design\"'\n  }\n}\n\nconst Jekyll = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, ...configs) {\n    super(gulp, preset, Default, ...configs)\n  }\n\n  run(done) {\n    let config = `--config ${this.config.options.config}`\n\n    let rawConfigFile = this.rawConfig()\n\n    // If raw is specified, add the temporary config file to the list of configs passed into the jekyll command\n    if (rawConfigFile) {\n      config += `,${rawConfigFile}`\n    }\n\n    this.exec(`${Ruby.localPath(('rubyRunner.sh'))} ${this.config.options.baseCommand} jekyll build ${config}`)\n\n    this.donezo(done)\n  }\n\n  // Create temporary config file if needed\n  rawConfig() {\n    if (this.config.options.raw) {\n      // Tmp file is only available within the context of this function\n      let tmpFile = tmp.fileSync({prefix: '_config.', postfix: '.yml'})\n\n      // Write raw to file\n      fs.writeFileSync(tmpFile.name, this.config.options.raw)\n\n      // return the file path\n      return tmpFile.name\n    }\n    else {\n      return null\n    }\n  }\n}\n\nexport default Jekyll\n","import Recipes from './recipes'\n\n/**\n *\n * @param recipes - (recipes or task fns, or task names)\n */\nconst series = (gulp, ...recipes) => {\n  let series = gulp.series(new Recipes().toTasks(recipes))\n\n  // hack to attach the recipes for inspection by aggregate\n  series.recipes = recipes\n  return series\n}\nseries.displayName = `<series>`\n\nexport default series\n","import tmp from 'tmp'\n\n/**\n *\n */\nconst tmpDir = (options = {prefix: 'gulp-pipeline_'}) => {\n  let tmpDirObj = tmp.dirSync(options)\n\n  tmpDirObj.removeCallback.displayName = '<tmpDir cleanup>'\n\n  return tmpDirObj\n}\n\nexport default tmpDir\n","import tmpDirObj from './tmpDir'\n\n/**\n *\n */\nconst tmpDirName = (options = {prefix: 'gulp-pipeline_'}) => {\n  return tmpDirObj(options).name\n}\n\nexport default tmpDirName\n","import BaseRecipe from './baseRecipe'\n\nconst Default = {\n  debug: false,\n  watch: false,\n  presetType: 'macro',\n  task: false\n}\n\n/**\n * Sleep the given ms value, for those quirky cases like when you need the filesystem to catch up.\n */\nconst Sleep = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, sleep, ...configs) {\n    super(gulp, preset, Default, {sleep: sleep}, ...configs)\n  }\n\n  createDescription(){\n    return `Sleeps for ${this.config.sleep} milliseconds.`\n  }\n\n  run(done) {\n    setTimeout(() => { // eslint-disable-line no-undef\n      this.donezo(done)\n    }, this.config.sleep)\n  }\n}\n\nexport default Sleep\n","import Sleep from '../sleep'\n\n/**\n * Simplified sleep() that uses the Sleep recipe\n */\nconst sleep = (gulp, ms) => {\n  let c = new Sleep(gulp, {}, ms)\n  // set the display name so it shows up in the task list\n  c.taskFn.displayName = `<sleep>`\n  return c\n}\n\nexport default sleep\n","import extend from 'extend'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\nimport DefaultRegistry from 'undertaker-registry'\n\nexport const Default = {\n  debug: false,\n  // preset: -- mixed in at runtime in the constructor to avoid issues in non-rails projects\n  global: {debug: false} // mixed into every config i.e debug: true\n}\n\nconst BaseRegistry = class extends DefaultRegistry {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(...configs) {\n    super()\n    this.config = extend(true, {}, Default, ...configs)\n    this.debugDump(`[${this.constructor.name}] using resolved config:`, this.config)\n  }\n\n  // ----------------------------------------------\n  // protected\n\n  /**\n   * Class-based configuration overrides.  Shortcut to #keyConfig with class name lookup.\n   */\n  classConfig(clazz) {\n    const className = clazz.prototype.constructor.name\n    return this.keyConfig(className)\n  }\n\n  /**\n   * config key-based configuration overrides:\n   *  - these may be a single config hash or array of config hashes (last hash overrides earlier hashes)\n   *  - in some cases, passing false for the class name may be implemented as omitting the registration of the recipe (see implementation of #init for details)\n   *\n   *  @return -  array - one or more configs as an array, so usage below in init is a universal spread/splat\n   */\n  keyConfig(key) {\n    this.debug(`Resolving config for: ${key}...`)\n    let config = this.config[key]\n\n    this.debugDump(`config`, config)\n    if (config === undefined) {\n      config = [{}]\n    }\n\n    if (!Array.isArray(config)) {\n      config = [config]\n    }\n\n    // add global at the begining of the array\n    config.unshift(this.config.global)\n\n    return config\n  }\n\n  requireValue(value, name) {\n    if (value === undefined || value == null) {\n      this.notifyError(`${name} must be defined, found: ${value}`)\n    }\n  }\n\n  log(msg) {\n    Util.log(msg)\n  }\n\n  debug(msg) {\n    if (this.config.debug) {\n      this.log(`[${Util.colors.cyan('debug')}][${Util.colors.cyan(this.constructor.name)}] ${msg}`)\n    }\n  }\n\n  debugDump(msg, obj) {\n    this.debug(`${msg}:\\n${this.dump(obj)}`)\n  }\n\n  dump(obj) {\n    return stringify(obj)\n  }\n\n  notifyError(error, e) {\n    this.log(error)\n    throw e\n  }\n}\n\nexport default BaseRegistry\n","import BaseRegistry from './baseRegistry'\n\nimport Preset from '../preset'\nimport Clean from '../clean'\nimport CleanDigest from '../cleanDigest'\nimport CssNano from '../cssNano'\nimport Images from '../images'\nimport Sass from '../sass'\nimport RollupAmd from '../rollupAmd'\nimport RollupIife from '../rollupIife'\nimport RollupCjs from '../rollupCjs'\nimport RollupCjsBundled from '../rollupCjsBundled'\nimport RollupUmd from '../rollupUmd'\nimport ScssLint from '../scssLint'\nimport EsLint from '../eslint'\nimport Rev from '../rev'\nimport RevReplace from '../revReplace'\nimport Uglify from '../uglify'\nimport Aggregate from '../aggregate'\nimport parallel from '../util/parallel'\nimport series from '../util/series'\nimport tmpDir from '../util/tmpDir'\nimport clean from '../util/clean'\n\n// per class name defaults that can be overridden\nexport const Default = {\n  // Class-based configuration overrides:\n  //  - these may be a single config hash or array of config hashes (last hash overrides earlier hashes)\n  //  - in some cases, passing false for the class name may be implemented as omitting the registration of the recipe (see implementation of #init for details)\n  RollupIife: true, // absent any overrides, build iife\n  RollupCjs: false,\n  RollupAmd: false,\n  RollupUmd: false\n}\n\n/**\n * gulp.registry(new RailsRegistry(...configs))\n */\nconst RailsRegistry = class extends BaseRegistry {\n\n  /**\n   * @param config - customized overrides of the Default, last one wins\n   */\n  constructor(...configs) {\n    super(Default, {preset: Preset.rails()}, ...configs)\n  }\n\n  init(gulp) {\n    let preset = this.config.preset\n\n    const js = new Aggregate(gulp, 'js',\n      series(gulp,\n        this.esLinters(gulp),\n        this.rollups(gulp)\n      ),\n      ...this.keyConfig('js')\n    )\n\n    const css = new Aggregate(gulp, 'css',\n      series(gulp,\n        this.scssLinters(gulp),\n        new Sass(gulp, preset)\n      ),\n      ...this.keyConfig('css')\n    )\n\n    const defaultRecipes = new Aggregate(gulp, 'default',\n      series(gulp,\n        new Clean(gulp, preset),\n        parallel(gulp,\n          new Images(gulp, preset),\n          js,\n          css\n        )\n      ),\n      ...this.keyConfig('default')\n    )\n\n    // Create the production assets\n    const tmpDirObj = tmpDir()\n    const minifiedAssetsDir = tmpDirObj.name\n    this.debug(`tmpDir for minified assets: ${minifiedAssetsDir}`)\n\n\n    // digests need to be one task, tmpDir makes things interdependent\n    const digests = {task: false, watch: false}\n\n    const digest = new Aggregate(gulp, 'digest',\n      series(gulp,\n        new CleanDigest(gulp, preset, digests),\n\n        // minify application.(css|js) to a tmp directory\n        parallel(gulp,\n          new Uglify(gulp, preset, digests, {dest: minifiedAssetsDir, concat: {dest: 'application.js'}}),\n          new CssNano(gulp, preset, digests, {dest: minifiedAssetsDir, minExtension: false})\n        ),\n\n        // rev minified css|js from tmp\n        new Rev(gulp, preset, digests, {\n          source: {\n            options: {\n              cwd: minifiedAssetsDir\n            }\n          }\n        }),\n        // rev all the rest from the debug dir (except the minified application(css|js)) and merge with the previous rev\n        new Rev(gulp, preset, digests, {\n          source: {\n            options: {\n              ignore: ['**/application.js', '**/*.js.map', '**/application.css']\n            }\n          }\n        }),\n\n        // rewrite all revised urls in the assets i.e. css, js\n        new RevReplace(gulp, preset, digests),\n\n        // cleanup the temp files and folders\n        clean(gulp, `${minifiedAssetsDir}/**`)\n      ),\n      ...this.keyConfig('digest')\n    )\n\n    // default then digest\n    new Aggregate(gulp, 'all',\n      series(gulp,\n        defaultRecipes,\n        digest\n      ),\n      ...this.keyConfig('all')\n    )\n  }\n\n  esLinters(gulp) {\n    return new EsLint(gulp, this.config.preset, ...this.classConfig(EsLint))\n  }\n\n  scssLinters(gulp){\n    return new ScssLint(gulp, this.config.preset, ...this.classConfig(ScssLint))\n  }\n\n  rollups(gulp) {\n    let preset = this.config.preset\n    // javascripts may have two different needs, one standard iife, and one cjs for rails engines\n    let rollups = []\n\n    // All rails apps need the iife which is ultimately the application.js.\n    //  Some rails engines may want it only for the purpose of ensuring that libraries can be included properly otherwise the build breaks (a good thing)\n    if (this.config.RollupIife) {\n      rollups.push(\n        new RollupIife(gulp, preset, {\n          options: {\n            dest: 'application.js',\n            moduleName: 'App'\n          }\n        }, ...this.classConfig(RollupIife))\n      )\n    }\n\n    // Rails apps probably don't need commonjs, so by default it is off.\n    //  Rails engines DO need commonjs, it is consumed by the rails app like any other node library.\n    if (this.config.RollupCjs) {\n      rollups.push(\n        new RollupCjs(gulp, preset, {\n          options: {\n            dest: 'application.cjs.js',\n            moduleName: 'App'\n          }\n        }, ...this.classConfig(RollupCjs))\n      )\n    }\n\n    if (this.config.RollupCjsBundled) {\n      rollups.push(\n        new RollupCjsBundled(gulp, preset, {\n          options: {\n            dest: 'application.cjs-bundled.js',\n            moduleName: 'App'\n          }\n        }, ...this.classConfig(RollupCjsBundled))\n      )\n    }\n\n    if (this.config.RollupUmd) {\n      rollups.push(\n        new RollupUmd(gulp, preset, {\n          options: {\n            dest: 'application.umd.js',\n            moduleName: 'App'\n          }\n        }, ...this.classConfig(RollupUmd))\n      )\n    }\n\n    if (this.config.RollupAmd) {\n      rollups.push(\n        new RollupAmd(gulp, preset, {\n          options: {\n            dest: 'application.amd.js',\n            moduleName: 'App'\n          }\n        }, ...this.classConfig(RollupAmd))\n      )\n    }\n\n    return parallel(gulp,\n      ...rollups\n    )\n  }\n}\n\nexport default RailsRegistry\n","import RailsRegistry from './railsRegistry'\nimport EsLint from '../eslint'\nimport ScssLint from '../scssLint'\nimport parallel from '../util/parallel'\nimport File from '../util/file'\n\nexport const Default = {}\n\n/**\n * Simplified registry for RailsEngineDummy applications\n *  - adds extra watches on engine js/css sources\n *\n * gulp.registry(new RailsEngineDummyRegistry(...configs))\n */\nconst RailsEngineDummyRegistry = class extends RailsRegistry {\n\n  /**\n   * @param config - customized overrides of the Default, last one wins\n   */\n  constructor(...configs) {\n    super(Default, ...configs)\n  }\n\n  /**\n   * Add linter for engine source\n   * @param gulp\n   */\n  esLinters(gulp) {\n    const engineCwd = {\n      options: {\n        cwd: File.findup(this.config.preset.javascripts.source.options.cwd, {cwd: '..'})\n      }\n    }\n\n    return parallel(gulp,\n      super.esLinters(gulp),\n      new EsLint(gulp, this.config.preset, {\n        task: {name: 'eslint:engine'},\n        source: engineCwd,\n        watch: engineCwd\n      }) // lint the engine source\n    )\n  }\n\n  /**\n   * Add linter for engine source\n   * @param gulp\n   */\n  scssLinters(gulp) {\n    const engineCwd = {\n      options: {\n        cwd: File.findup(this.config.preset.stylesheets.source.options.cwd, {cwd: '..'})\n      }\n    }\n\n    return parallel(gulp,\n      super.scssLinters(gulp),\n      new ScssLint(gulp, this.config.preset, {\n        //debug: true,\n        task: {name: 'scss:lint:engine'},\n        source: engineCwd,\n        watch: engineCwd\n      }) // lint the engine source\n    )\n  }\n}\n\nexport default RailsEngineDummyRegistry\n"],"names":["Default","Util","PluginError","fs","Buffer","node_modules","rollup","buildControl","BuildControl","Npm","tmpDirObj"],"mappings":"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"}