{"version":3,"file":"gulp-pipeline.es.js","sources":["../src/rails.js","../src/preset.js","../src/base.js","../src/baseRecipe.js","../src/autoprefixer.js","../src/eslint.js","../src/images.js","../src/sass.js","../src/scssLint.js","../src/taskSeries.js","../src/rollupEs.js","../src/rollupCjs.js","../src/rollupIife.js","../src/rollupAmd.js","../src/rollupUmd.js","../src/baseClean.js","../src/cleanImages.js","../src/cleanStylesheets.js","../src/cleanJavascripts.js","../src/cleanDigest.js","../src/clean.js","../src/rev.js","../src/minifyCss.js","../src/mocha.js","../src/basePublish.js","../src/prepublish.js","../src/publishBuild.js"],"sourcesContent":["import path from 'path'\n//import extend from 'extend'\nimport glob from 'glob'\nimport spawn from 'cross-spawn'\nimport fs from 'fs'\nimport jsonfile from 'jsonfile'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\n\nconst BaseDirectoriesCache = `.gulp-pipeline-rails.json`\nconst GemfileLock = `Gemfile.lock`\n\nconst Rails = class {\n  static enumerateEngines() {\n\n    let results = spawn.sync(this.localPath('railsRunner.sh'), [this.localPath('enumerateEngines.rb')], {\n      sdtio: 'inherit',\n      cwd: this.railsAppCwd()\n    })\n\n    //Util.log(stringify(results))\n    if (results.stderr != '' || results.error != null) {\n      Util.log(stringify(results))\n\n      let msg = ''\n      if (results.stderr) {\n        msg += results.stderr\n      }\n      if (results.error) {\n        msg += results.error\n      }\n      // message will be either error or stderr, so just grap both of them\n      throw new Error(`Ruby script error: \\n${results.stderr}${results.error}`)\n    }\n    return JSON.parse(results.stdout)\n  }\n\n  /**\n   * We need a rails app to run our rails script runner.  Since this project could be a rails engine, find a rails app somewhere in or under the cwd.\n   */\n  static railsAppCwd() {\n    let entries = glob.sync('**/bin/rails', {realpath: true})\n    if (!entries || entries.length <= 0) {\n      throw new Error(`Unable to find Rails application directory based on existence of 'bin/rails'`)\n    }\n\n    if (entries.length > 1) {\n      throw new Error(`railsAppCwd() should only find one rails application but found ${entries}`)\n    }\n    return path.join(entries[0], '../..')\n  }\n\n  static localPath(name) {\n    let filename = `rails/${name}`\n\n    // if using source dir\n    let filepath = filepath = path.join(__dirname, filename) // eslint-disable-line no-undef\n    try {\n      fs.statSync(filepath)\n    }\n    catch (error) {\n      // if using dist dir\n      filepath = path.join(__dirname, '../src', filename) // eslint-disable-line no-undef\n      fs.statSync(filepath)\n    }\n\n    return filepath\n  }\n\n  /**\n   * Return the baseDirectories to search for assets such as images.  In rails, this means\n   *  enumerating rails engines and collecting their root paths.  This is a lengthy process\n   *  because you have to startup a rails environment to enumerate the engines, so we cache\n   *  the baseDirectories in a file and compare it to the Gemfile.lock's modified time.  If\n   *  the Gemfile.lock changes, we throw out the cache, enumerate the engines again and write\n   *  a new cache file.\n   *\n   * @returns {{baseDirectories: string[]}}\n   */\n  static baseDirectories() {\n    if (!this.changed(GemfileLock, BaseDirectoriesCache)) {\n      return jsonfile.readFileSync(BaseDirectoriesCache)\n    }\n    else {\n      Util.log(`Generating baseDirectories cache...`)\n      try {\n        fs.unlinkSync(BaseDirectoriesCache)\n      } catch (error) {\n        //ignore\n      }\n\n      Util.log(`Enumerating rails engines...`)\n      let engines = Rails.enumerateEngines()\n      //console.log(stringify(engines))\n\n      let baseDirectories = ['./']\n      for (let key of Object.keys(engines)) {\n        baseDirectories.push(engines[key])\n      }\n\n      Util.log(`Writing baseDirectories cache...`)\n      let result = {baseDirectories: baseDirectories}\n      jsonfile.writeFileSync(BaseDirectoriesCache, result, {spaces: 2})\n      return result\n    }\n  }\n\n  static changed(sourceFileName, targetFileName) {\n    let sourceStat = null\n    let targetStat = null\n    try {\n      sourceStat = fs.statSync(sourceFileName)\n      targetStat = fs.statSync(targetFileName)\n    }\n    catch (error) {\n      return true\n    }\n\n    if (sourceStat.mtime > targetStat.mtime) {\n      return true\n    }\n    else {\n      return false\n    }\n  }\n}\n\nexport default Rails\n","import extend from 'extend'\nimport Rails from './rails'\nimport stringify from 'stringify-object'\n//import Util from 'gulp-util'\n\n// NOTE: `source` and `watch` are node-glob options hashes. e.g. gulp.src(source.glob, source.options)\n\n// Baseline is the simplest possible.  Take caution in modifying this one or make sure your platform preset overrides everything necessary.\nconst Baseline = {\n  javascripts: {\n    source: {\n      glob: 'index.js',\n      options: {cwd: 'src'},\n      all: '**/*.js'\n    },\n    test: {\n      glob: '**/*.js',\n      options: {cwd: 'test'}\n    },\n    watch: {\n      glob: '**/*.js',\n      options: {cwd: 'src'}\n    },\n    dest: 'dist'\n  },\n  stylesheets: {\n    source: {\n      glob: ['*.scss', '!_*.scss'],  // do not compile all files, only non-underscored files\n      options: {cwd: 'src'},\n      all: '**/*.scss'\n    },\n    watch: {\n      glob: '**/*.scss',\n      options: {cwd: 'src'}\n    },\n    dest: 'dist'\n  },\n  images: {\n    source: {options: {cwd: 'images'}},\n    watch: {options: {cwd: 'images'}},\n    dest: 'dist'\n  },\n  digest: {\n    source: {options: {cwd: 'dist'}},\n    watch: {options: {cwd: 'dist'}},\n    dest: 'dist/digest'\n  }\n}\n\nconst PresetNodeSrc = {}\n\nconst PresetNodeLib = {\n  javascripts: {\n    source: {\n      options: {cwd: 'lib'}\n    },\n    watch: {options: {cwd: 'lib'}}\n  },\n  stylesheets: {\n    source: {options: {cwd: 'lib'}},\n    watch: {options: {cwd: 'lib'}}\n  },\n  images: {\n    source: {options: {cwd: 'lib'}},\n    watch: {options: {cwd: 'lib'}}\n  }\n}\n\n// Rails, the oddball from a structure consideration\nconst railsJs = 'app/assets/javascripts'\nconst railsSs = 'app/assets/stylesheets'\nconst railsImages = 'app/assets/images'\nconst railsDest = 'public/assets/debug'\nconst PresetRails = {\n  javascripts: {\n    source: {\n      glob: 'application.js',\n      options: {cwd: railsJs}\n    },\n    watch: {options: {cwd: railsJs}},\n    dest: railsDest\n  },\n  stylesheets: {\n    source: {options: {cwd: railsSs}},\n    watch: {options: {cwd: railsSs}},\n    dest: railsDest\n  },\n  images: {\n    source: {options: {cwd: railsImages}},\n    watch: {options: {cwd: railsImages}},\n    dest: railsDest\n  },\n  digest: {\n    source: {options: {cwd: railsDest}},\n    watch: {options: {cwd: railsDest}},\n    dest: 'public/assets/digest'\n  }\n}\n\n\nconst Preset = class {\n  static nodeLib(overrides = {}) {\n    return extend(true, {}, Baseline, PresetNodeLib, overrides)\n  }\n\n  static nodeSrc(overrides = {}) {\n    return extend(true, {}, Baseline, PresetNodeSrc, overrides)\n  }\n\n  static rails(overrides = {}) {\n\n    return extend(true, {}, Baseline, PresetRails, Rails.baseDirectories(), overrides)\n  }\n\n  /**\n   * Helper to quickly resolve the config from preset based on the presetType\n   *\n   * @param preset\n   * @param configs - ordered set of overrides\n   * @returns {source, watch, dest}\n   */\n  static resolveConfig(preset, ...configs) {\n    if (!preset) {\n      throw new Error(`Preset must be specified.  Please use one from the preset.js or specify a custom preset configuration.`)\n    }\n\n    let configOverrides = extend(true, {}, ...configs)\n    //Util.log(`config before typeConfig: \\n${stringify(configOverrides)}`)\n\n    if (!configOverrides || !configOverrides.presetType) {\n      throw new Error(`presetType must be specified in the config (usually the Default config).  See preset.js for a list of types such as javascripts, stylesheets, etc.`)\n    }\n\n    let typeConfig = null\n    if (configOverrides.presetType !== 'macro') {\n      typeConfig = preset[configOverrides.presetType]\n      if (!typeConfig) {\n        throw new Error(`Unable to resolve configuration for presetType: ${configOverrides.presetType} from preset: ${stringify(preset)}`)\n      }\n    }\n    else {\n      typeConfig = {}\n    }\n\n    // now that we've determined the typeConfig, overlay the overrides\n    let resolved = extend(true, {}, typeConfig, configOverrides)\n\n    //Util.log(`resolved config with preset: \\n${stringify(resolved)}`)\n    return resolved\n  }\n}\nexport default Preset\n","import extend from 'extend'\nimport Util from 'gulp-util'\nimport notify from 'gulp-notify'\nimport stringify from 'stringify-object'\nimport gulpHelp from 'gulp-help'\nimport console from 'console'\n\nexport const Default = {\n  watch: true,\n  debug: false\n}\n\nconst Base = class {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, config) {\n    this.gulp = gulpHelp(gulp, {afterPrintCallback: () => console.log(`For configuration help see https://github.com/alienfast/gulp-pipeline \\n`)}) // eslint-disable-line no-console\n    this.config = extend(true, {}, Default, config)\n    this.debug(`[${this.constructor.name}] using resolved config: ${stringify(this.config)}`)\n  }\n\n  // ----------------------------------------------\n  // protected\n  log(msg) {\n    Util.log(msg)\n  }\n\n  debug(msg) {\n    if (this.config.debug) {\n      this.log(`[${Util.colors.cyan('debug')}][${Util.colors.cyan(this.constructor.name)}] ${msg}`)\n    }\n  }\n\n  debugDump(msg, obj){\n    this.debug(`${msg}:\\n${stringify(obj)}`)\n  }\n\n  notifyError(error, watching = false) {\n    let lineNumber = (error.lineNumber) ? `Line ${error.lineNumber} -- ` : ''\n    let taskName = error.task || this.taskName()\n\n    notify({\n      title: `Task [${taskName}] Failed in [${error.plugin}]`,\n      message: `${lineNumber}See console.`,\n      sound: 'Sosumi' // See: https://github.com/mikaelbr/node-notifier#all-notification-options-with-their-defaults\n    }).write(error)\n\n    let tag = Util.colors.black.bgRed\n    let report = `\n\n${tag('    Task:')} [${Util.colors.cyan(taskName)}]\n${tag('  Plugin:')} [${error.plugin}]\n${tag('   Error:')}\n${error.message}`\n\n    if (error.lineNumber) {\n      report += `${tag('    Line:')} ${error.lineNumber}\\n`\n    }\n    if (error.fileName)   {\n      report += `${tag('    File:')} ${error.fileName}\\n`\n    }\n    this.log(report)\n\n    // Prevent the 'watch' task from stopping\n    if(!watching) {\n      this.gulp.emit('end')\n    }\n  }\n\n  debugOptions() {\n    return {title: `[${Util.colors.cyan('debug')}][${Util.colors.cyan(this.taskName())}]`}\n  }\n}\n\nexport default Base\n","import Base from './base'\nimport Preset from './preset'\nimport extend from 'extend'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\n\nexport const Default = {\n  watch: true,\n  debug: false,\n  task: {\n    help: ''\n  }\n}\n\nconst BaseRecipe = class extends Base {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config) {\n\n    super(gulp, extend(true, {},\n      Default,\n      {baseDirectories: preset.baseDirectories},\n      Preset.resolveConfig(preset, config)))\n\n    // in case someone needs to inspect it later i.e. buildControl\n    this.preset = preset\n\n    if (this.createHelpText !== undefined) {\n      this.config.task.help = this.createHelpText()\n    }\n    this.registerTask()\n    this.registerWatchTask()\n  }\n\n\n  //createHelpText(){\n  //  // empty implementation that can dynamically create help text instead of the static config.task.help\n  //}\n\n  registerWatchTask() {\n    if (this.config.watch) {\n      // generate watch task e.g. sass:watch\n      let name = this.watchTaskName()\n      this.debug(`Registering task: ${Util.colors.green(name)}`)\n      this.gulp.task(name, this.createWatchHelpText(), () => {\n        this.log(`[${Util.colors.green(name)}] watching ${this.config.watch.glob} ${stringify(this.config.watch.options)}...`)\n\n        return this.gulp.watch(this.config.watch.glob, this.config.watch.options, (event) => {\n          this.log(`File ${event.path} was ${event.type}, running ${this.taskName()}...`);\n          return Promise\n            .resolve(this.run(true))\n            .then(() => this.logFinish())\n        })\n      })\n    }\n  }\n\n  createWatchHelpText() {\n    return Util.colors.grey(`|___ watches ${this.config.watch.options.cwd}/${this.config.watch.glob}`)\n  }\n\n\n  registerTask() {\n    if (this.config.task) {\n      // generate primary task e.g. sass\n      let name = this.taskName()\n      this.debug(`Registering task: ${Util.colors.green(name)}`)\n      this.gulp.task(name, this.config.task.help, () => {\n        //this.log(`Running task: ${Util.colors.green(name)}`)\n\n        if (this.config.debug) {\n          this.debugDump(`Executing ${Util.colors.green(name)} with options:`, this.config.options)\n        }\n        return this.run()\n      })\n    }\n  }\n\n  taskName() {\n    return this.config.task.name || this.constructor.name // guarantee something is present for error messages\n  }\n\n  watchTaskName() {\n    if (this.config.watch && this.config.watch.name) {\n      return this.config.watch.name\n    }\n    else {\n      return `${this.taskName()}:watch`\n    }\n  }\n\n  logFinish(message = 'finished.') {\n    this.log(`[${Util.colors.green(this.taskName())}] ${message}`)\n  }\n}\n\nexport default BaseRecipe\n","import BaseRecipe from './baseRecipe'\nimport autoprefixer from 'gulp-autoprefixer'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport debug from 'gulp-debug'\n\nexport const Default = {\n  options: {  // from bootstrap\n    browsers: [\n      //\n      // Official browser support policy:\n      // http://v4-alpha.getbootstrap.com/getting-started/browsers-devices/#supported-browsers\n      //\n      'Chrome >= 35', // Exact version number here is kinda arbitrary\n      // Rather than using Autoprefixer's native \"Firefox ESR\" version specifier string,\n      // we deliberately hardcode the number. This is to avoid unwittingly severely breaking the previous ESR in the event that:\n      // (a) we happen to ship a new Bootstrap release soon after the release of a new ESR,\n      //     such that folks haven't yet had a reasonable amount of time to upgrade; and\n      // (b) the new ESR has unprefixed CSS properties/values whose absence would severely break webpages\n      //     (e.g. `box-sizing`, as opposed to `background: linear-gradient(...)`).\n      //     Since they've been unprefixed, Autoprefixer will stop prefixing them,\n      //     thus causing them to not work in the previous ESR (where the prefixes were required).\n      'Firefox >= 31', // Current Firefox Extended Support Release (ESR)\n      // Note: Edge versions in Autoprefixer & Can I Use refer to the EdgeHTML rendering engine version,\n      // NOT the Edge app version shown in Edge's \"About\" screen.\n      // For example, at the time of writing, Edge 20 on an up-to-date system uses EdgeHTML 12.\n      // See also https://github.com/Fyrd/caniuse/issues/1928\n      'Edge >= 12',\n      'Explorer >= 9',\n      // Out of leniency, we prefix these 1 version further back than the official policy.\n      'iOS >= 8',\n      'Safari >= 8',\n      // The following remain NOT officially supported, but we're lenient and include their prefixes to avoid severely breaking in them.\n      'Android 2.3',\n      'Android >= 4',\n      'Opera >= 12'\n    ]\n  }\n}\n\nconst Autoprefixer = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  run(watching = false) {\n    // FIXME: is this right or wrong?  this class initially was extracted for reuse of Default options\n    return this.gulp.src(this.config.source)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(autoprefixer(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n      .pipe(this.gulp.dest(this.config.dest))\n  }\n}\n\nexport default Autoprefixer\n","import BaseRecipe from './baseRecipe'\nimport eslint from 'gulp-eslint'\nimport extend from 'extend'\n//import jscs from 'gulp-jscs'\n//import stylish from 'gulp-jscs-stylish'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\nimport Util from 'gulp-util'\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts',\n  task: {\n    name: 'eslint'\n  },\n  source: {\n    glob: '**/*.js'\n  },\n  options: {}\n}\n\nconst EsLint = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  createHelpText(){\n    return `Lints ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n    // eslint() attaches the lint output to the \"eslint\" property of the file object so it can be used by other modules.\n    let bundle = this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(eslint(this.config.options))\n      .pipe(eslint.format()) // outputs the lint results to the console. Alternatively use eslint.formatEach() (see Docs).\n\n\n      //1. HACK solution that works with first error, but is very ugly\n      // this should emit the error, but we aren't notified\n      .pipe(gulpif(!watching, eslint.failAfterError())) // To have the process exit with an error code (1) on lint error, return the stream and pipe to failAfterError last.\n\n      // make sure we are notified of any error (this really should be happening in eslint.failAfterError(), but not sure where it is lost)\n      .pipe(eslint.result((results) => { // this is single file #result not #results, we don't get notified on #results\n        let count = results.errorCount;\n        if (count > 0) {\n          throw new Util.PluginError(\n            'gulp-eslint',\n            {\n              message: 'Failed with' + (count === 1 ? ' error' : ' errors')\n            }\n          )\n        }\n      }))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n\n      // 2. Attempt now that returns are in place with the gulpif\n      // this should emit the error, but we aren't notified\n      //.pipe(gulpif(!watching, eslint.failAfterError())) // To have the process exit with an error code (1) on lint error, return the stream and pipe to failAfterError last.\n      //.on('error', (error) => {\n      //  this.notifyError(error, watching)\n      //})\n\n      //// 3. Attempt now that returns are in place WITHOUT gulpif\n      //// this should emit the error, but we aren't notified\n      //.pipe( eslint.failAfterError()) // To have the process exit with an error code (1) on lint error, return the stream and pipe to failAfterError last.\n      //.on('error', (error) => {\n      //  this.notifyError(error, watching)\n      //})\n\n      // 4. https://github.com/adametry/gulp-eslint/issues/135#issuecomment-180555978\n      //.pipe(eslint.results(function (results) {\n      //  var count = results.errorCount;\n      //  console.log('Total ESLint Error Count: ' + count);\n      //  if (count > 0) {\n      //    throw new Error('Failed with Errors');\n      //  }\n      //}))\n      //.on('error', function (error) {\n      //  console.log('Total ESLint Error Count: ' + error);\n      //})\n      //.on('finish', function () {\n      //  console.log('eslint.results finished');\n      //})\n      //.on('end', function () {\n      //  console.log('eslint.results ended');\n      //})\n\n      //// 5. notification is emitted\n      //.pipe(eslint.results(function (results) {\n      //  var count = results.errorCount;\n      //  console.log('*****Error Count: ' + count);\n      //  if (count > 0) {\n      //    throw new Error('******My custom error');\n      //  }\n      //}))\n      //.on('error', (error) => {\n      //  this.notifyError(error, watching)\n      //})\n\n\n      //// 6. notification is emitted\n      //.pipe(eslint.results(function (results) {\n      //  var count = results.errorCount;\n      //  console.log('*****Error Count: ' + count);\n      //  if (count > 0) {\n      //    throw new PluginError('******My custom error');\n      //  }\n      //}))\n      //.on('error', (error) => {\n      //  this.notifyError(error, watching)\n      //})\n\n      //// 7. notification is emitted, except when watching\n      //.pipe(eslint.results(function (results) {\n      //  let count = results.errorCount;\n      //  console.error('****************in results handler')\n      //  if (count > 0) {\n      //    throw new PluginError('gulp-eslint', { message: 'Failed with ' + count + (count === 1 ? ' error' : ' errors') })\n      //  }\n      //}))\n      //.on('error', (error) => {\n      //  console.error('****************in error handler')\n      //  this.notifyError(error, watching)\n      //})\n\n\n      //.pipe( eslint.failAfterError())\n      //.on('error', (error) => {\n      //  this.notifyError(error, watching)\n      //})\n\n\n\n    // FIXME: even including any remnant of JSCS at this point broke everything through the unfound requirement of babel 5.x through babel-jscs.  I can't tell where this occurred, but omitting gulp-jscs for now gets me past this issue.  Revisit this when there are clear updates to use babel 6\n    //.pipe(jscs())      // enforce style guide\n    //.pipe(stylish())  // log style errors\n    //.pipe(jscs.reporter('fail')) // fail on error\n\n    return bundle\n  }\n}\n\nexport default EsLint\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport changed    from 'gulp-changed'\nimport imagemin   from 'gulp-imagemin'\nimport merge from 'merge-stream'\nimport path from 'path'\n\nexport const Default = {\n  debug: false,\n  presetType: 'images',\n  task: {\n    name: 'images'\n  },\n  watch: {\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  source: {\n    // baseDirectories: [] ** resolved from preset **\n    glob: '**',\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  options: {}\n}\n\nconst Images = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createHelpText() {\n    return `Minifies change images from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n\n    var tasks = this.config.baseDirectories.map((baseDirectory) => {\n      // join the base dir with the relative cwd\n      return this.runOne(path.join(baseDirectory, this.config.source.options.cwd), watching)\n    })\n    return merge(tasks);\n  }\n\n  runOne(cwd, watching) {\n\n    // setup a run with a single cwd a.k.a base directory FIXME: perhaps this could be in the base recipe? or not?\n    let options = extend({}, this.config.source.options)\n    options.cwd = cwd\n    this.debug(`src: ${cwd}/${this.config.source.glob}`)\n\n    return this.gulp.src(this.config.source.glob, options)\n      .pipe(changed(this.config.dest)) // ignore unchanged files\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(imagemin(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n      .pipe(this.gulp.dest(this.config.dest))\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default Images\n","import BaseRecipe from './baseRecipe'\nimport { Default as AutoprefixerDefault } from './autoprefixer'\nimport autoprefixer from 'gulp-autoprefixer'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport sass from 'gulp-sass'\nimport sourcemaps from 'gulp-sourcemaps'\nimport gulpif from 'gulp-if'\n\nimport findup from 'findup-sync'\nconst node_modules = findup('node_modules')\n\nexport const Default = {\n  debug: false,\n  presetType: 'stylesheets',\n  task: {\n    name: 'sass'\n  },\n  options: {\n    // WARNING: `includePaths` this should be a fully qualified path if overriding\n    //  @see https://github.com/sass/node-sass/issues/1377\n    includePaths: [node_modules] // this will find any node_modules above the current working directory\n  },\n  // capture defaults from autoprefixer class\n  autoprefixer: {\n    options: AutoprefixerDefault.options\n  }\n}\n\nconst Sass = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createHelpText() {\n    return `Compiles ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n    // add debug for importing problems (can be very helpful)\n    if(this.config.debug && this.config.options.importer === undefined) {\n      this.config.options.importer = (url, prev, done) => {\n        this.debug(`importing ${url} from ${prev}`)\n        done({file: url})\n      }\n    }\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(sourcemaps.init())\n      .pipe(sass(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n      .pipe(autoprefixer(this.config.autoprefixer.options))\n      .pipe(sourcemaps.write())\n      .pipe(this.gulp.dest(this.config.dest))\n      .pipe(this.browserSync.stream())\n  }\n}\n\nexport default Sass\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\nimport scssLint from 'gulp-scss-lint'\nimport scssLintStylish from 'gulp-scss-lint-stylish'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\n\nexport const Default = {\n  debug: false,\n  presetType: 'stylesheets',\n  task: {\n    name: 'scsslint'\n  },\n  source: {\n    glob: '**/*.scss'\n  },\n  options: {\n    customReport: scssLintStylish\n  }\n}\n\nconst ScssLint = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  createHelpText(){\n    return `Lints ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(scssLint(this.config.options))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n  }\n}\n\nexport default ScssLint\n","import Base from './base'\nimport extend from 'extend'\nimport Util from 'gulp-util'\nimport stringify from 'stringify-object'\n\nconst Default = {\n  debug: false,\n  watch: true  // register a watch task that aggregates all watches and runs the full sequence\n}\n\nconst TaskSeries = class extends Base {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, taskName, recipes, config = {}) {\n    super(gulp, extend(true, {}, Default, config))\n    this.recipes = recipes\n    this.registerTask(taskName, recipes)\n\n    if (this.config.watch) {\n      this.registerWatchTask(`${taskName}:watch`, recipes)\n    }\n  }\n\n  createHelpText() {\n    let taskNames = this.flattenedRecipes().reduce((a, b) => {\n      return a.concat(b.taskName());\n    }, [])\n\n    // use the config to generate the dynamic help\n    return `Runs series [${taskNames.join(', ')}]`\n  }\n\n  createWatchHelpText() {\n    let taskNames = this.watchableRecipes().reduce((a, b) => {\n      return a.concat(b.taskName());\n    }, [])\n\n    return Util.colors.grey(`|___ aggregates watches from [${taskNames.join(', ')}] and runs full series`)\n  }\n\n  registerTask(taskName) {\n    let tasks = this.toTaskNames(this.recipes)\n\n    this.debugDump('this.recipes', this.recipes)\n    this.debugDump('tasks', tasks)\n\n    this.debug(`Registering task: ${Util.colors.green(taskName)} for ${stringify(tasks)}`)\n    this.gulp.task(taskName, this.createHelpText(), () => {\n      return this.run(tasks)\n    })\n  }\n\n  flattenedRecipes() {\n    let recipes = [].concat(...this.recipes)\n    //this.debugDump(`flattenedRecipes`, recipes)\n    return recipes\n  }\n\n  watchableRecipes() {\n    // create an array of watchable recipes\n    let watchableRecipes = []\n    for (let recipe of this.flattenedRecipes()) {\n      if (recipe.config.watch) {\n        watchableRecipes.push(recipe)\n      }\n    }\n    return watchableRecipes\n  }\n\n  registerWatchTask(taskName, recipes) {\n    // generate watch task\n    let watchableRecipes = this.watchableRecipes()\n    if (watchableRecipes.length < 1) {\n      this.debug(`No watchable recipes for task: ${Util.colors.green(taskName)}`)\n      return\n    }\n\n    this.debug(`Registering task: ${Util.colors.green(taskName)}`)\n    this.gulp.task(taskName, this.createWatchHelpText(), () => {\n\n      // watch the watchable recipes and make them #run the series\n      for (let recipe of watchableRecipes) {\n        this.log(`[${Util.colors.green(taskName)}] watching ${recipe.taskName()} ${recipe.config.watch.glob}...`)\n        this.gulp.watch(recipe.config.watch.glob, recipe.config.watch.options, (event) => {\n          this.log(`[${Util.colors.green(taskName)}] ${event.path} was ${event.type}, running series...`);\n          return Promise\n            .resolve(this.run(recipes))\n            .then(() => this.log(`[${Util.colors.green(taskName)}] finished`))\n        })\n      }\n    })\n  }\n\n  run(tasks) {\n    // generate the task sequence\n    return this.runSequence(...tasks)\n  }\n\n  toTaskNames(recipes, tasks = []) {\n    //this.debugDump(`toTaskNames`, recipes)\n    for (let recipe of recipes) {\n      //this.debugDump(`recipe taskName[${recipe.taskName? recipe.taskName() : ''}] isArray[${Array.isArray(recipe)}]`, recipe)\n      if (Array.isArray(recipe)) {\n        tasks.push(this.toTaskNames(recipe, []))\n      }\n      else {\n        this.debug(`Adding to list ${recipe.taskName()}`)\n        tasks.push(recipe.taskName())\n      }\n    }\n\n    return tasks\n  }\n\n  // -----------------------------------\n  // originally run-sequence code https://github.com/OverZealous/run-sequence\n  // Copyright (c) 2014 [Phil DeJarnett](http://overzealous.com)\n  // - Will be unnecessary with gulp 4.0\n  // - Forced to include this/modify it as the #use(gulp) binding of the gulp instance didn't work with es class approach\n\n  runSequence(...taskSets) {\n    this.callBack = typeof taskSets[taskSets.length - 1] === 'function' ? taskSets.pop() : false\n    this.debug(`currentTaskSet = null`)\n    this.currentTaskSet = null\n    this.verifyTaskSets(taskSets)\n    this.taskSets = taskSets\n\n    this.onEnd = (e) => this.onTaskEnd(e)\n    this.onErr = (e) => this.onError(e)\n\n    this.gulp.on('task_stop', this.onEnd)\n    this.gulp.on('task_err', this.onErr)\n\n    this.runNextSet()\n  }\n\n  finish(e) {\n    this.debugDump(`finish`, e)\n    this.gulp.removeListener('task_stop', this.onEnd)\n    this.gulp.removeListener('task_err', this.onErr)\n\n    let error = null\n    if (e && e.err) {\n      this.debugDump(`finish e`, e)\n      //error = new Util.PluginError('run-sequence', {\n      //  message: `An error occured in task [${e.task}].`\n      //})\n      error = {\n        task: e.task,\n        message: e.err,\n        plugin: e.plugin || ''\n      }\n    }\n\n    if (this.callback) {\n      this.callback(error)\n    }\n    else if (error) {\n      //this.log(Util.colors.red(error.toString()))\n      this.notifyError(error)\n    }\n  }\n\n  onError(err) {\n    this.debugDump(`onError`, err)\n    this.finish(err)\n  }\n\n  onTaskEnd(event) {\n    this.debugDump(`onTaskEnd`, event)\n    //this.debugDump(`this.currentTaskSet`, this.currentTaskSet)\n\n    let i = this.currentTaskSet.indexOf(event.task)\n    if (i > -1) {\n      this.currentTaskSet.splice(i, 1)\n    }\n    if (this.currentTaskSet.length === 0) {\n      this.runNextSet()\n    }\n  }\n\n  runNextSet() {\n    if (this.taskSets.length) {\n      let command = this.taskSets.shift()\n      if (!Array.isArray(command)) {\n        command = [command]\n      }\n      this.debug(`currentTaskSet = ${command}`)\n      this.currentTaskSet = command\n      this.gulp.start(command)\n    }\n    else {\n      this.finish()\n    }\n  }\n\n  verifyTaskSets(taskSets, skipArrays, foundTasks = {}) {\n\n    this.debug(`verifyTaskSets: ${stringify(taskSets)}`)\n\n    if (taskSets.length === 0) {\n      throw new Error('No tasks were provided to run-sequence')\n    }\n\n    for (let t of taskSets) {\n      let isTask = (typeof t === \"string\")\n      let isArray = !skipArrays && Array.isArray(t)\n\n      if (!isTask && !isArray) {\n        throw new Error(`Task ${t} is not a valid task string.`)\n      }\n\n      if (isTask && !this.gulp.hasTask(t)) {\n        throw new Error(`Task ${t} is not configured as a task on gulp.`)\n      }\n\n      if (skipArrays && isTask) {\n        if (foundTasks[t]) {\n          throw new Error(`Task ${t} is listed more than once. This is probably a typo.`)\n        }\n        foundTasks[t] = true\n      }\n\n      if (isArray) {\n        if (t.length === 0) {\n          throw new Error(`An empty array was provided as a task set`)\n        }\n        this.verifyTaskSets(t, true, foundTasks)\n      }\n    }\n  }\n}\n\nexport default TaskSeries\n","import BaseRecipe from './baseRecipe'\nimport { rollup } from 'rollup'\n//import BrowserSync from 'browser-sync'\nimport extend from 'extend'\nimport glob from 'glob'\nimport stringify from 'stringify-object'\nimport nodeResolve from 'rollup-plugin-node-resolve'\nimport commonjs from 'rollup-plugin-commonjs'\nimport process from 'process'\nimport findup from 'findup-sync'\nconst node_modules = findup('node_modules')\n\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts',\n  task: {\n    name: 'rollup:es'\n  },\n  options: {\n    //entry: 'src/index.js', // ** resolved from the source glob/cwd **\n    //dest: '', // ** resolved from preset **\n    sourceMap: true,\n    format: 'es6',\n    plugins: []\n  }\n}\n\n// This nodeResolve configuration is not used unless it is within the plugins: [nodeResolve(this.config.nodeResolve.options)] - pass this.config.nodeResolve.enabled == true in config to enable default options\nexport const NodeResolve = {\n  nodeResolve: {\n    enabled: false,\n\n    // - see https://github.com/rollup/rollup-plugin-node-resolve\n    options: {\n      // use \"jsnext:main\" if possible\n      // – see https://github.com/rollup/rollup/wiki/jsnext:main\n      jsnext: true,\n\n      // use \"main\" field or index.js, even if it's not an ES6 module (needs to be converted from CommonJS to ES6\n      // – see https://github.com/rollup/rollup-plugin-commonjs\n      main: true,\n\n      //skip: [ 'some-big-dependency' ], // if there's something your bundle requires that you DON'T want to include, add it to 'skip'\n\n      // By default, built-in modules such as `fs` and `path` are treated as external if a local module with the same name\n      // can't be found. If you really want to turn off this behaviour for some reason, use `builtins: false`\n      builtins: false,\n\n      // Some package.json files have a `browser` field which specifies alternative files to load for people bundling\n      // for the browser. If that's you, use this option, otherwise pkg.browser will be ignored.\n      browser: true,\n\n      // not all files you want to resolve are .js files\n      extensions: [ '.js', '.json' ]\n    }\n  }\n}\n\nexport const CommonJs = {\n  commonjs: {\n    enabled: false,\n    options: {\n      include: `${node_modules}/**`,\n      //exclude: [ `${node_modules}/foo/**', `${node_modules}/bar/**` ],\n\n      // search for files other than .js files (must already be transpiled by a previous plugin!)\n      extensions: [ '.js' ] // defaults to [ '.js' ]\n    }\n  }\n}\n\nconst RollupEs = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n\n    if (!config.options.dest) {\n      throw new Error(`options.dest filename must be specified.`)\n    }\n\n    super(gulp, preset, extend(true, {}, Default, NodeResolve, CommonJs, config))\n\n    // Utilize the presets to get the dest cwd/base directory, then add the remaining passed-in file path/name\n    this.config.options.dest = `${this.config.dest}/${this.config.options.dest}`\n\n    //----------------------------------------------\n    // plugins order: nodeResolve, commonjs, babel\n\n    // Add commonjs before babel\n    if(this.config.commonjs.enabled) {\n      this.debug('Adding commonjs plugin')\n      // add at the beginning\n      this.config.options.plugins.unshift(commonjs(this.config.commonjs.options))\n    }\n\n    // Add nodeResolve before (commonjs &&|| babel)\n    if(this.config.nodeResolve.enabled) {\n      this.debug('Adding nodeResolve plugin')\n      // add at the beginning\n      this.config.options.plugins.unshift(nodeResolve(this.config.nodeResolve.options))\n    }\n\n    //this.browserSync = BrowserSync.create()\n  }\n\n  resolveEntry() {\n    // Resolve the source and make sure there is one entry point\n    if (Array.isArray(this.config.source.glob)) {\n      throw new Error(`Rollup only accepts one entry point.  Found array for source.glob: ${this.config.source.glob}`)\n    }\n    // get full path results\n    this.config.source.options['realpath'] = true\n\n    let entry = glob.sync(this.config.source.glob, this.config.source.options)\n\n    if (!entry || entry.length <= 0) {\n      throw new Error(`Unable to resolveEntry() for source: ${stringify(this.config.source)} from ${process.cwd()}`)\n    }\n\n    if (entry.length > 1) {\n      throw new Error(`resolveEntry() should only find one entry point but found ${entry} for source: ${stringify(this.config.source)}`)\n    }\n    return entry[0]\n  }\n\n  createHelpText(){\n    return `Rollup ${this.config.source.options.cwd}/${this.config.source.glob} in the ${this.config.options.format} format to ${this.config.options.dest}`\n  }\n\n  run(watching = false) {\n    let options = extend(true, {\n        entry: this.resolveEntry(),\n        onwarn: (message) => {\n          //this.notifyError(message, watching)\n          this.log(message)\n        }\n      },\n      this.config.options)\n\n    if(this.config.debug) {\n      let prunedOptions = extend(true, {}, options)\n      prunedOptions.plugins = `[ (count: ${this.config.options.plugins.length}) ]`\n      this.debug(`Executing rollup with options: ${stringify(prunedOptions)}`)\n    }\n\n    return rollup(options)\n      .then((bundle) => {\n        return bundle.write(options)\n      })\n      .catch((error) => {\n        error.plugin = 'rollup'\n        this.notifyError(error, watching)\n      })\n  }\n}\n\nexport default RollupEs\n","import RollupEs from './rollupEs'\nimport extend from 'extend'\nimport babel from 'rollup-plugin-babel';\n\nexport const Default = {\n  task: {\n    name: 'rollup:cjs'\n  },\n  options: {\n    //dest: '', // required\n    format: 'cjs',\n    plugins: [babel({\n      babelrc: false,\n      presets: ['es2015-rollup']\n    })]\n  },\n  nodeResolve: {\n    enabled: true // bundle a full package with dependencies?\n  },\n  commonjs: {\n    enabled: true // convert dependencies to commonjs modules for rollup\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupCjs = class extends RollupEs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default RollupCjs\n","import RollupCjs from './rollupCjs'\nimport extend from 'extend'\n\nexport const Default = {\n  task: {\n    name: 'rollup:iife'\n  },\n  options: {\n    //dest: '', // required\n    format: 'iife'\n  },\n  nodeResolve: {\n    enabled: true // by nature, iife is the full package so bundle up those dependencies.\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupIife = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default RollupIife\n","import RollupCjs from './rollupCjs'\nimport extend from 'extend'\n\nexport const Default = {\n  task: {\n    name: 'rollup:amd'\n  },\n  options: {\n    //dest: '', // required\n    format: 'amd'\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupAmd = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default RollupAmd\n","import RollupCjs from './rollupCjs'\nimport extend from 'extend'\n\nexport const Default = {\n  task: {\n    name: 'rollup:umd'\n  },\n  options: {\n    //dest: '', // required\n    format: 'umd'\n  }\n}\n\n/**\n * ----------------------------------------------\n * Class Definition\n * ----------------------------------------------\n */\nconst RollupUmd = class extends RollupCjs {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default RollupUmd\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\nimport del from 'del'\n\nexport const Default = {\n  debug: false,\n  watch: false,\n  sync: true  // necessary so that tasks can be run in a series, can be overriden for other purposes\n}\n\nconst BaseClean = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  createHelpText(){\n    // use the config to generate the dynamic help\n    return `Cleans ${this.config.dest}`\n  }\n\n  run(watching = false) {\n    if (this.config.sync) {\n      let paths = del.sync(this.config.dest)\n      this.logDeleted(paths)\n    }\n    else {\n      return del(this.config.dest)\n        .then((paths) => {\n          this.logDeleted(paths)\n        })\n        .catch((error) => {\n          error.plugin = 'del'\n          this.notifyError(error, watching)\n        })\n    }\n  }\n\n  logDeleted(paths) {\n    if (paths.length > 0) {\n      this.log(`Deleted files and folders:`)\n      for(let path of paths){\n        this.log(`    ${path}`)\n      }\n    }\n  }\n}\n\nexport default BaseClean\n","import BaseClean from './baseClean'\nimport extend from 'extend'\n\nexport const Default = {\n  presetType: 'images',\n  task: {\n    name: 'clean:images'\n  }\n}\n\nconst CleanImages = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default CleanImages\n","import BaseClean from './baseClean'\nimport extend from 'extend'\n\nexport const Default = {\n  presetType: 'stylesheets',\n  task: {\n    name: 'clean:stylesheets'\n  }\n}\n\nconst CleanStylesheets = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default CleanStylesheets\n","import BaseClean from './baseClean'\nimport extend from 'extend'\n\nexport const Default = {\n  presetType: 'javascripts',\n  task: {\n    name: 'clean:javascripts'\n  }\n}\n\nconst CleanJavascripts = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default CleanJavascripts\n","import BaseClean from './baseClean'\nimport extend from 'extend'\n\nexport const Default = {\n  presetType: 'digest',\n  task: {\n    name: 'clean:digest'\n  }\n}\n\nconst CleanDigest = class extends BaseClean {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n}\n\nexport default CleanDigest\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\nimport CleanImages from './cleanImages'\nimport CleanStylesheets from './cleanStylesheets'\nimport CleanJavascripts from './cleanJavascripts'\nimport CleanDigest from './cleanDigest'\n\nconst Default = {\n  debug: false,\n  watch: false,\n  presetType: 'macro',\n  task: {\n    name: 'clean',\n    help: 'Cleans images, stylesheets, and javascripts.'\n  }\n}\n\nconst Clean = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n\n    this.cleanImages = new CleanImages(gulp, preset)\n    this.cleanStylesheets = new CleanStylesheets(gulp, preset)\n    this.cleanJavascripts = new CleanJavascripts(gulp, preset)\n    this.cleanDigest = new CleanDigest(gulp, preset)\n  }\n\n  run() {\n    this.cleanImages.run()\n    this.cleanStylesheets.run()\n    this.cleanJavascripts.run()\n    this.cleanDigest.run()\n  }\n}\n\nexport default Clean\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport rev   from 'gulp-rev'\n\nexport const Default = {\n  debug: false,\n  presetType: 'digest',\n  task: {\n    name: 'rev'\n  },\n  watch: {\n    glob: ['**', '!digest', '!digest/**', '!*.map'],\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  source: {\n    glob: ['**', '!digest', '!digest/**', '!*.map'],\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  options: {}\n}\n\nconst Rev = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createHelpText() {\n    return `Adds revision digest to assets from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n\n    // FIXME merge in the clean as a task\n\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      //.pipe(changed(this.config.dest)) // ignore unchanged files\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(rev(this.config.options))\n      .pipe(this.gulp.dest(this.config.dest))\n      .pipe(rev.manifest())\n      .pipe(this.gulp.dest(this.config.dest))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n      .pipe(this.browserSync.stream())\n\n  }\n}\n\nexport default Rev\n","import BaseRecipe from './baseRecipe'\nimport BrowserSync from 'browser-sync'\nimport debug from 'gulp-debug'\nimport extend from 'extend'\nimport gulpif from 'gulp-if'\nimport cssnano from 'gulp-cssnano'\n\nexport const Default = {\n  debug: false,\n  presetType: 'digest',\n  task: {\n    name: 'minifyCss'\n  },\n  watch: {\n    glob: ['digest/**.css'],\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  source: {\n    glob: ['digest/**.css'],\n    options: {\n      //cwd: ** resolved from preset **\n    }\n  },\n  options: {}\n}\n\n/**\n * Recipe to be run after Rev or any other that places final assets in the digest destination directory\n */\nconst MinifyCss = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n    this.browserSync = BrowserSync.create()\n  }\n\n  createHelpText() {\n    return `Minifies digest css from ${this.config.source.options.cwd}/${this.config.source.glob}`\n  }\n\n  run(watching = false) {\n\n    // FIXME merge in the clean as a task\n\n\n    return this.gulp.src(this.config.source.glob, this.config.source.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(cssnano(this.config.options))\n      .pipe(this.gulp.dest(this.config.dest))\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n      .pipe(this.browserSync.stream())\n\n  }\n}\n\nexport default MinifyCss\n","import BaseRecipe from './baseRecipe'\nimport Preset from './preset'\nimport extend from 'extend'\nimport mocha from 'gulp-mocha'\nimport debug from 'gulp-debug'\nimport gulpif from 'gulp-if'\n\nexport const Default = {\n  debug: false,\n  presetType: 'javascripts',\n  task: {\n    name: 'mocha'\n  },\n  options: {}\n}\n\nconst Mocha = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param preset - base preset configuration - either one from preset.js or a custom hash\n   * @param config - customized overrides for this recipe\n   */\n  constructor(gulp, preset, config = {}) {\n    // resolve watch cwd based on test cwd\n    super(gulp, preset, extend(true, {},\n      Default,\n      {watch: {options: {cwd: Preset.resolveConfig(preset, Default, config).test.options.cwd}}},\n      config))\n  }\n\n  createHelpText() {\n    return `Tests ${this.config.test.options.cwd}/${this.config.test.glob}`\n  }\n\n  run(watching = false) {\n    let bundle = this.gulp.src(this.config.test.glob, this.config.test.options)\n      .pipe(gulpif(this.config.debug, debug(this.debugOptions())))\n      .pipe(mocha({reporter: 'nyan'})) // gulp-mocha needs filepaths so you can't have any plugins before it\n      .on('error', (error) => {\n        this.notifyError(error, watching)\n      })\n\n    return bundle\n  }\n}\n\nexport default Mocha\n","import BaseRecipe from './baseRecipe'\nimport extend from 'extend'\n\n/**\n *  This is the base for publish recipes using BuildControl\n */\nexport const Default = {\n\n  dir: 'build', // directory to assemble the files - make sure to add this to your .gitignore so you don't publish this to your source branch\n  source: {\n    types: ['javascripts', 'stylesheets'], // source types to resolve from preset and copy into the build directory pushing to the dist branch\n    files: ['package.json', 'bower.json', 'LICENSE*', 'dist'] // any additional file patterns to copy to `dir`\n  },\n  watch: false,\n  presetType: 'macro',\n  options: { // see https://github.com/alienfast/build-control/blob/master/src/buildControl.js#L11\n    //cwd: 'build', // Uses recipe's dir\n    branch: 'dist',\n    tag: {\n      existsFailure: false\n    },\n    clean: {\n      before: true,\n      after: false\n    }\n  }\n}\n\nconst BasePublish = class extends BaseRecipe {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n\n    // use the dir as the cwd to the BuildControl class\n    this.config.options = extend(true, {debug: this.config.debug, cwd: this.config.dir}, this.config.options)\n  }\n}\n\nexport default BasePublish\n","import BasePublish from './basePublish'\nimport BuildControl from 'build-control/src/buildControl'\nimport extend from 'extend'\n\nconst Default = {\n  task: {\n    name: 'prepublish',\n    help: 'Checks tag name and ensures directory has all files committed.'\n  },\n  options: {\n    tag: {\n      existsFailure: true\n    }\n  }\n}\n\n/**\n *  This recipe will run a preflight check on publishing to ensure tag name and commits are ready to go.\n *\n *  Run this before long running tests to error your build quickly.\n */\nconst Prepublish = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  run() {\n    let buildControl = new BuildControl(this.config.options)\n    buildControl.prepublishCheck()\n  }\n}\n\nexport default Prepublish\n","import BasePublish from './basePublish'\nimport BuildControl from 'build-control/src/buildControl'\nimport extend from 'extend'\nimport fs from 'fs-extra'\nimport path from 'path'\nimport process from 'process'\nimport pathIsAbsolute from 'path-is-absolute'\nimport glob from 'glob'\n\n\n/**\n *  This recipe will keep your source branch clean but allow you to easily push your\n *  dist files to a separate branch, all while keeping track of the origin commits.\n *\n *  Did I mention it will autotag based on your package.json?\n *\n *  Typically, your build tools put compiled files in dist.  A clean build packages typically needs to consist of\n *  1. package metadata - package.json or bower.json\n *  2. license\n *  3. compiled dist files\n *  4. source files - Javascript ES projects, as well as SCSS libraries for example need to publish source\n *\n *  To keep your source branch clean with this recipe's default configuration, add the following to .gitignore:\n *  - build\n *  - dist\n *\n *  Run this recipe, it will delete/create the `build` dir, copy the files above, and commit/push (changes from remote)\n *  to the `dist` branch.  Now you have clean separation of source and dist.\n *\n *  Have long running maintenance on an old version?  Publish to a different dist branch like { options: {branch: 'dist-v3'} }\n */\nconst Default = {\n  //debug: true,\n  readme: {\n    enabled: true,\n    name: 'README.md',\n    template: `# %sourceName%\n\n%sourceTagLink% built from commit %sourceCommitLink% on branch \\`%sourceBranch%\\`. See the [README](../..) for more details\n\n---\n<sup>Built and published by [gulp-pipeline](https://github.com/alienfast/gulp-pipeline) using [build-control](https://github.com/alienfast/build-control)</sup>\n`\n  },\n  task: {\n    name: 'publishBuild',\n    help: 'Assembles and pushes the build to a branch'\n  }\n}\n\nconst PublishBuild = class extends BasePublish {\n\n  /**\n   *\n   * @param gulp - gulp instance\n   * @param config - customized overrides\n   */\n  constructor(gulp, preset, config = {}) {\n    super(gulp, preset, extend(true, {}, Default, config))\n  }\n\n  /**\n   * Copy all the configured sources to the config.dir directory\n   */\n  prepareBuildFiles() {\n    let buildDir = this.config.dir\n    this.debug(`Using build directory: ${buildDir}`)\n\n    // copy preset type files\n    for (let type of this.config.source.types) {\n      let typePreset = this.preset[type]\n\n      this.log(`Copying ${typePreset.source.options.cwd}/${typePreset.source.all}...`)\n      for (let name of glob.sync(typePreset.source.all, typePreset.source.options)) {\n        let from = path.join(typePreset.source.options.cwd, name)\n        let to = path.join(buildDir, from)\n        this.log(`\\t...to ${to}`)\n        fs.copySync(from, to)\n      }\n    }\n\n    // copy any additional configured files\n    for (let fileGlob of this.config.source.files) {\n\n      this.log(`Copying ${fileGlob}...`)\n      for (let fromFullPath of glob.sync(fileGlob, {realpath: true})) {\n        let from = path.relative(process.cwd(), fromFullPath)\n        let to = path.join(buildDir, from)\n        this.log(`\\t...to ${to}`)\n        fs.copySync(from, to)\n      }\n    }\n  }\n\n  run() {\n    let buildControl = new BuildControl(this.config.options)\n\n    // bump the version and commit to git\n    buildControl.npm.bump()\n\n    this.prepareBuildFiles()\n\n    // generate a readme on the branch if one is not copied in.\n    if (this.config.readme.enabled) {\n      let readme = path.join(this.config.dir, this.config.readme.name)\n      if (fs.existsSync(readme)) {\n        this.log(`Found readme at ${readme}.  Will not generate a new one from the template.  Turn this message off with { readme: {enabled: false} }`)\n      }\n      else {\n        fs.writeFileSync(readme, buildControl.interpolate(this.config.readme.template))\n      }\n    }\n\n    // run the commit/tagging/pushing\n    buildControl.run()\n\n    // publish to npm\n    buildControl.npm.publish()\n  }\n\n  resolvePath(cwd, base = process.cwd()) {\n    if (!pathIsAbsolute(cwd)) {\n      return path.join(base, cwd)\n    }\n    else {\n      return cwd\n    }\n  }\n}\n\nexport default PublishBuild\n"],"names":["Default","node_modules","rollup","fs"],"mappings":"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"}